## Index
索引

### 概述

索引是以空间换时间的设计思想。

在数据库中，索引是帮助存储引擎快速获取数据的一种数据结构。

#### 索引的分类

- 按数据结构分类：B+Tree 索引、Hash 索引、Full-text 索引。
- 按物理存储分类：聚簇索引（主键索引）、二级索引（辅助索引）。
- 按字段特性分类：主键索引、唯一索引、普通索引、前缀索引。
- 按字段个数分类：单列索引、联合索引。


使用B+Tree的主键索引和二级索引的区别是前者叶子节点存放实际数据，后者只存放主键值和指定字段值。所以，使用二级索引查询完整记录时需要查两次B+Tree，这个过程叫做回表。但是如果只查询某个字段，而二级索引也有这个字段，那不需要回表了，这样的索引称为覆盖索引。

Hash在做等值查询的时候效率很快，搜素复杂度O(1)。但Hash表不适合做范围查询。

二叉树的每个父节点的子节点个数只能是2个，小规模的数据量，树的深度就很高了，需要太多次的磁盘IO。IO操作的效率很低，那么，当在大量数据存储中，查询时我们不能一下子将所有数据加载到内存中，只能逐一加载磁盘页，每个磁盘页对应树的节点。造成大量磁盘IO操作（最坏情况下为树的高度）。二叉树由于树深度过大而造成磁盘IO读写过于频繁，进而导致效率低下。

B Tree的时间复杂度与二叉树一样，均为O(logN)。然而B Tree出现是因为磁盘IO。

对于B+Tree，其搜索复杂度是O(logdN)，其中d表示节点允许的最大子节点个数。实际应用当中，d值是大于100的，这样就保证了，即使数据达到千万级别时，B+Tree的高度依然维持在3~4层，也就是一次查询操作只需要3~4次的磁盘IO。

B+Tree 只在叶子节点存储数据，所以其单个节点的数据量要小，在相同的磁盘IO次数下，能查询到更多的节点。

B+Tree 叶子节点采用双链表连接，适合常见的基于范围的顺序查找。B Tree无法做到这一点。
