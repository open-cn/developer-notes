## 计算机网络

### 交换机和路由器

网络的工作方式是使用两种设备：交换机和路由器，来将计算机与外围设备连接起来。这两种工具使连接到网络上的设备之间以及其它网络相互通信。

#### 交换机

交换机（Switch）：主要用于将一栋大厦或一个校园里的多台设备连接到同一个网络上。例如，一台交换机可以将您的多台计算机、打印机和服务器连接起来，从而形成一个共享资源网络。交换机相当于一个控制器，允许不同的设备共享信息并且彼此通信。通过共享信息和合理地分配资源，交换机可以帮助您节省资金，提高工作效率。交换机有两种基本类型：非管理型和管理型。

- 非管理型交换机：拆箱即可投入使用，并且不允许进行任何更改。因此，家庭网络设备通常使用非管理型交换机。
- 管理型交换机：则允许您对它进行编程。由此提供了更大的灵活性，因为您可以利用本地或远程方式对其进行监控和调整，进而控制网络的通信流量及网络用户访问权。管理性交换机的典型特征就是具有管理登录 IP。

#### 路由器

路由器（Router）：主要用于将多个网络连接起来。例如，您会用一台路由器将联网的计算机连接到互联网上，从而使多名用户共享一个互联网连接。路由器相当于一个调度员，它会选择最佳的路由路径来传送信息，以便您迅速收到信息。首先，路由器会分析网络发送的数据，改变数据的打包方式，然后将数据发送到另一个网络上或者其他类型的网络上。它们将贵公司与外界连接起来，保护信息不受安全威胁，甚至可以决定哪些计算机拥有更高的优先级。根据贵公司的具体需求和网络计划，可以选择具有不同功能的路由器：

- 防火墙（Firewalls）：一种用于检查接收的数据并且防止公司网络受到攻击的专业软件。
- 虚拟专网（VPN）：一种允许远程员工从远程地点安全访问网络的途径。
- IP 电话网络：利用语音和电话会议技术将贵公司的计算机和电话网络集成在一起，从而简化并统一公司的通信方式。

#### 交换技术

交换技术是随着电话通信的发展和使用而出现的通信技术。电话刚开始使用时，只能实现固定的两个人之间的通话，随着用户的增加，人们开始研究如何构建连接多个用户的电话网络，以实现任意两个用户之间的通信。

##### 传统的 2 层交换技术

从广义上讲，任何数据的转发都可以叫做交换（Switch）。但是，传统的、狭义的第 2 层交换技术，仅包括数据链路层的转发。2 层交换机主要用在小型局域网中，计算机数量在二、三十台以下，这样的网络环境下，广播包影响不大，2 层交换机的快速交换功能、多个接入端口和低廉价格，为小型网络用户提供了完善的解决方案。交换式局域网技术使专用的带宽为用户所独享，极大地提高了局域网传输的效率。

##### 具有路由功能的 3 层交换技术

在大规模局域网中，为了减小广播风暴的危害，就必须把大型局域网按功能或地域等因素划分成多个小局域网。与此同时，就出现了不同子网间的互访需求，但这是 2 层交换技术无法实现的。为了从技术上解决这个问题，网络厂商利用第 3 层交换技术开发了 3 层交换机，又称路由交换机，它是传统交换机与路由器的智能结合。简单地说，可以处理网络第 3 层数据转发的交换技术就是第 3 层交换技术。

从硬件上看，在第 3 层交换机中，与路由器有关的第 3 层路由硬件模块，也插接在高速背板/总线上。这种方式使得路由模块可以与需要路由的其它模块间，高速交换数据。3 层交换机是为 IP 设计的，接口类型简单，拥有很强的 3 层包处理能力，价格又比相同速率的路由器低得多，非常适用于大规模局域网络。

##### 具有网络服务功能的 7 层交换技术

第 7 层交换技术通过逐层解开数据包的每层封装，并识别出应用层的信息，以实现对数据内容的理解。可以处理网络应用层数据转发的交换技术就是第 7 层交换技术。其主要目的是充分利用带宽资源，对互联网上的应用、内容进行管理，提高网络服务水平，数据流优化和智能负载均衡，完成互联网向智能化的转变。第 7 层交换技术通过应用层交换机实现了所有高层网络的功能，使网络管理者能够以更低的成本，更好地分配网络资源。

从硬件上看，7 层交换机将所有功能集中在一个专用的特殊应用集成电路或 ASIC（Application-specific Integrated Circuit，专用集成电路）上。ASIC 比传统路由器的 CPU 便宜，而且通常分布在网络端口上，在单一设备中包括了 50 个 ASIC，可以支持数以百计的接口。

#### 路由技术

路由技术主要是指路由选择算法、因特网的路由选择协议的特点及分类。

路由选择算法：

- 静态路由选择算法：是非自适应路由选择算法，这是一种不测量、不利用网络状态信息，仅仅按照某种固定规律进行决策得简单得路由选择算法。静态路由选择算法得特点是简单和开销小，但是不能适应网络状态的变化。静态路由选择算法主要包括扩散法和固定路由表法。静态路由是依靠手工输入的信息来配置路由表的方法。优点是减小了路由器的日常开销。在小型互联网上很容易配置。可以控制路由选择的更新。但是，静态路由在网络变化频繁出现的环境中并不会很好的工作。在大型的和经常变动的互联网，配置静态路由是不现实。
- 动态路由选择算法：是自适应路由选择算法，是依靠当前网络的状态信息进行决策，从而使路由选择结果在一定程度上适应网络拓扑结构和通信量的变化。特点是能较好的适应网络状态的变化，但是实现起来较为复杂，开销也比较大。动态路由选择算法一般采用路由表法，主要包括分布式路由选择算法和集中式路由选择算法。分布式路由选择算法是每一个节点通过定期得与相邻节点交换路由选择得状态信息来修改各自的路由表，这样使整个网络的路由选择经常处于一种动态变化的状况。集中式路由选择算法是网络中设置一个节点，专门收集各个节点定期发送得状态信息，然后由该节点根据网络状态信息，动态的计算出每一个节点的路由表，再将新的路由表发送给各个节点。

路由选择协议的特点：

- 自适应
- 分布式
- 分层次（分自治系统内部和自治系统外部）

路由选择协议划分为两大类：

- 内部网关协议（IGP，具体的协议有 RIP 和 OSPF 等）
- 外部网关协议（EGP，目前使用最多的是 BGP）


### 三层网络架构

采用层次化模型设计的三层网络，Cisco 称之为：分级的互连网络模型（Hierarchical Inter-networking Model）。即将复杂的网络设计分成几个层次，每个层次着重于某些特定的功能，这样就能够使一个复杂的大问题变成许多简单的小问题。

三层网络架构设计的网络有三个层次：

- 核心层（网络的高速交换主干）
- 汇聚层（提供基于策略的连接）
- 接入层 （将工作站接入网络）

为了方便管理、提高网络性能，大中型网络应按照标准的三层结构设计。但是，对于网络规模小，联网距离较短的环境，可以采用“收缩核心”设计，忽略汇聚层。核心层设备可以直接连接接入层，这样一定程度上可以省去部分汇聚层费用，还可以减轻维护负担，更容易监控网络状况。

#### 核心层（Core Layer）

核心层：核心交换机为进出数据中心的包提供高速的转发，为多个汇聚层提供连接性，核心交换机为整个网络提供一个弹性的 L3 路由网络。

核心层是网络的高速交换主干，对整个网络的连通起到至关重要的作用。核心层应该具有如下几个特性：可靠性、高效性、冗余性、容错性、可管理性、适应性、低延时性等。在核心层中，应该采用高带宽的千兆以上交换机，因为核心层是网络的枢纽中心，重要性突出。核心层设备采用双机冗余热备份是非常必要的，也可以使用负载均衡功能，来改善网络性能。网络的控制策略最好尽量少在核心层上实施。核心层一直被认为是所有外部网络流量的最终承受者，所以对核心层的设计以及网络设备的要求十分严格。核心层设备将占投资的主要部分。

#### 汇聚层（Aggregation Layer）
汇聚层：汇聚交换机连接接入交换机，同时提供其他的服务，例如：防火墙，SSL Offload，入侵检测，网络分析等。

汇聚层是网络接入层和核心层的 “中介（中间层）”，就是在 Server 接入核心层前先做汇聚，以减轻核心层设备的负荷。汇聚层具有实施策略、安全、工作组接入、虚拟局域网（VLAN）之间的路由、源地址或目的地址过滤等多种功能。在汇聚层中，应该选用支持三层交换技术和 VLAN 的交换机，以达到网络隔离和分段的目的。

#### 接入层（Access Layer）
接入层：接入交换机通常位于机架顶部，所以它们也被称为ToR（Top of Rack）交换机，它们物理连接服务器。

接入层是直接面向用户连接的部分，向本地网段提供工作站接入，主要解决了相邻用户之间的互访需求。所以接入层可以选择不支持 VLAN 和三层交换技术的普通交换机，接入层交换机具有低成本、高端口密度且即插即用的特性。接入层还应当适当负责一些用户管理功能（如：地址认证、用户认证、计费管理等），以及用户信息收集工作（如：用户的 IP 地址、MAC 地址、访问日志等）。

#### 设计原则

- 层次化设计：每个层可以看作为是一个具有特定角色和功能的、结构定义良好的模块，层次化的设计结构，易于扩展和维护，降低了设计的复杂度和难度。三层网络架构可以更好地控制网络规模和网络质量，同时也方便网络管理和维护。
- 模块化设计：每个模块对应一个部门、功能或业务区域，可根据网络规模灵活扩展，部门或区域内部调整涉及范围小，容易进行问题定位。
- 冗余设计：双节点冗余性设计可以保证设备级可靠，适当的冗余提高可靠性，但过度的冗余也不便于运行维护。如果无法做好双节点冗余设计，对框式的核心交换机或者出口路由器，可以考虑单板级的冗余，如双主控板，双交换网板。另外，关键链路可以采用 Eth-Trunk 链路实现链路级可靠性。
- 对称性设计：网络的对称性便于业务部署，拓扑直观，便于协议设计和分析。

#### 特点

通常情况下，汇聚交换机是 L2 和 L3 网络的分界点，汇聚交换机以下的是 L2 网络，以上是 L3 网络。每组汇聚交换机管理一个 POD（Point Of Delivery），每个 POD 内都是独立的 VLAN 网络。服务器在 POD 内移动不必修改 IP 地址和默认网关，因为一个 POD 对应一个 L2 广播域。

汇聚交换机和接入交换机之间通常使用 STP（Spanning Tree Protocol，生成树协议）。STP 使得对于一个 VLAN 网络只有一个汇聚层交换机可用，其他的汇聚层交换机在当前使用的汇聚层交换机出现故障时才被使用（下图中的虚线）。也就是说汇聚层是一个 Active-Passive 的 HA 模式。这样在汇聚层，是做不到水平扩展的，因为就算加入多个汇聚层交换机，仍然只有一个在工作。一些私有的协议，例如 Cisco 的 vPC（Virtual Port Channel）可以提升汇聚层交换机的利用率。但是，一方面，这是私有协议，另一方面，vPC 也不能真正做到完全的水平扩展。

#### 问题

##### STP 协议既是良方又是毒药

生成树协议（Spanning Tree Protocol，STP），是一种工作在 OSI 网络模型中的第二层（数据链路层）的通信协议，基本应用是防止交换机冗余链路产生的环路，用于确保以太网中无环路的逻辑拓扑结构，从而避免了广播风暴大量占用交换机的资源。

传统的数据中心网络技术，STP 是二层网络中非常重要的一种协议。但是，在二层网络中使用 STP 协议有一个相当矛盾的点，那就是 可靠性 和 安全性 的矛盾。

- 可靠性是指构建二层网络时，一般会采用会采用设备冗余和链路冗余的方式。
- 安全性是指二层交换机同处于一个广播域，广播报文在环路中会反复持续传送，可能会形成广播风暴，所以必须防止形成环路。要想两种同时达到，可以采用 STP（生成树协议）自动控制，即冗余设备和冗余链路成备份，在正常情况下被阻塞掉，当出现链路故障时冗余的设备端口和链路才会被打开。

为什么二层交换网络会产生物理环路？

1. 链路冗余：交换机之间为了冗余、带宽提升、或错误连接难免会产生一个封闭的物理环路，而以太网的转发机制又决定了不能有物理环路，一有环路，那些发给所有主机的 Broadcast 、Unknown Unicast Frame 就会肆无忌惮在环路上永不停歇地绕圈圈。这些 Frame 永远无法到达目的地，对交换机 CPU 是一个致命的打击，如果有环路的发生，你可能无法本地、或远程登录你的交换机，只有重启或拔线了。
2. 二层交换机的转发机制：交换机对于从一个 Port N 上 incoming 的 frame，学习其 Source MAC X，生成 MAC Address Table（MAC X: Port N）。这样它就会生成 MAC 地址和 Port 的映射表，如果收到一个 Frame，就会通过 Frame 的 Destination MAC 与 MAC Address Table 进行匹配，继而得出这个 Frame 应该从哪一个 Port 发送出去。如果没有匹配到，就认为是 unknown Unicast 或 broadcast，只好将它从所有 Port（ 除了 incoming 口）发送出去，让 Frame 到了其他的交换机上尝试处理，于是这个 Frame 就有可能会一直在封闭的环路里无限的循环。

STP 协议的设计思路：人类的很多智慧来自于大自然，同学们仔细观察一棵树，会发现一棵树，有根，树干，树杈，树枝，叶子，水分通过根，源源不断地输送到主干，树杈，然后到达叶子。水分在从根扩散到叶子的过程中，一直是单向的；而叶子因为光合作用产生的能量，再沿着叶子到达树枝，树杈，树干，一直到根。水分和能量是相反方向的流量，如果定义根为上游，叶子为下游，则水是从上游流向下游；而能量则是由下游流向上游。无论是哪个方向的流量，都没有在原地打转的情况发生，那是因为树的物理结构是发散的，没有树干、树杈、树枝的物理交织，自然不会发生环路。网络科学家发现了这个规律，有一个大胆设想，既然二层网络里有物理环路，那用一种逻辑的方法将物理的环路斩断，斩成一个发散的树状架构，是不是Frame就不会无限循环下去了？答案是肯定的，也是这么做的。如果把树的拓扑结构用于二层交换网络，在二层网络里选择一个根（Root Bridge)，其它交换机当作树的树杈，每个树杈自然有一个根末梢（Root Port)，这个就是交换机的上游接口，除了根末梢，其它的接口都是下游接口，至于下游接口是畅通的、还是阻断的，取决于到根的路径成本（Cost），谁更接近根，谁就畅通（Forwarding) ，即常说的 Designated Port；谁远离根，谁就需要被阻断（Blocked)，即常说的 Non Designated Port。通过这种仿生的机制，可以有效地避免网络环路。

STP 协议的工作原理：任意一个交换机中如果到达根网桥有两条或者两条以上的链路，生成树协议都根据算法把其中一条切断，仅保留一条，从而保证任意两个交换机之间只有一条单一的活动链路。因为这种生成的这种拓扑结构，很像是以根交换机为树干的树形结构，故为生成树协议。

STP 的工作过程：首先进行根网桥的选举，其依据是网桥优先级（Bridge Priority）和 MAC 地址组合生成的桥 ID，桥 ID 最小的网桥将成为网络中的根桥（Root Bridge）。在此基础上，计算每个节点到根桥的距离，并由这些路径得到各冗余链路的代价，选择最小的成为通信路径（相应的端口状态变为 Forwarding），其它的就成为备份路径（相应的端口状态变为 Blocking）。STP 生成过程中的通信任务由 BPDU 完成，这种数据包又分为包含配置信息的配置 BPDU（其大小不超过 35B）和包含拓扑变化信息的通知 BPDU（其长度不超过 4B）。

由于 STP 协议造成的逐层收敛的性能问题，一般情况下 STP 的网络规模不会超过 100 台交换机。STP 的这种机制导致了二层链路利用率不足，尤其是在网络设备具有全连接拓扑关系时，这种缺陷尤为突出。如下图所示，当采用全网 STP 二层设计时，STP 将阻塞大多数链路，使接入到汇聚间带宽降至 1/4，汇聚至核心间带宽降至 1/8。这种缺陷造成越接近树根的交换机，端口拥塞越严重，造成的带宽资源浪费就越可观。


##### 云计算推动纵向流量向横向流量的转变

早期数据中心的流量有 80% 为横向（east-west，南北）流量，随着云计算、分布式架构的发展，现在已经转变为 70% 为纵向（north-south，东西）流量。所谓纵向流量指的是从数据中心外部到内部服务器之间交互的流量；横向流量指的是数据中心内部服务器之间交互的流量。

随着云计算的到来，越来越丰富的业务对数据中心的流量模型产生了巨大的冲击，如搜索、并行计算等业务，需要大量的服务器组成集群系统，协同完成工作，这导致服务器之间的流量变得非常大。比如搜索，用户只是发出一个搜索指令，服务器集群就在海量数据面前进行搜索与计算，这个过程是非常复杂的，而只是将结果传递给用户。早期数据中心主要满足外部对数据中心的访问，所以流量就以 “南北” 为主。这种流量模型受到了出口带宽的限制，一般的数据中心访问都会存在收敛比，即网络接入带宽比较大，而出口带宽比较小，访问的速度无法提升，在业务高峰期时，用户访问数据中心的体验感下降，这种网络模型已经不适应现今数据中心的发展需要。

##### 服务器虚拟化带来的虚拟机迁移问题

但随着数据量的增长，数据中心运营者发现的服务器不够了，当时最早做出反应是服务器层面，服务器虚拟化趋势越来越强，“提高服务器利用率”，“充分发挥计算资源效能”，成了当时最常听到的声音。随之而来的就是服务器与网络之间的关系改变了，原来网络和操作系统紧耦合的关系被打破，变成了松耦合的关系，网络不再能直接感知到操作系统了。而这种对应关系上的变化又带来了两个层面的矛盾：

- 性能层面：单台物理机上的应用多了，或者说是虚拟机多了，单个网口上承载的数据流量大了，原来的链路不够了；
- 功能层面：物理服务器不是真正的业务所在了，真正的业务在虚拟机上，但是虚拟机要在服务器上漂移，不能够被固定在原先一个区域当中了；

在三层网络架构中，通常会将二层网络的范围限制在网络接入层以下，避免出现大范围的二层广播域。这就导致了服务器不能随便在不同二层域之间移动，一旦服务器迁移到其他二层域，就需要变更 IP 地址，伴随着生产业务中断。在具有网络关联性的服务器集群中甚至会牵一发而动全身，相关的服务器也要跟着变更相应的配置，影响巨大。

由于这般限制，传统数据中心的三层网络架构设计根本无法满足服务器虚拟化中更灵活的、可自定义的虚拟机迁移策略。服务器虚拟化从根本上改变了数据中心网络架构的需求，需求数据中心、甚至是跨数据中的网络可以支持大范围的二层域，二层网络规模有多大，虚拟机才能调度、迁移有多远。

### 2G\3G\4G\5G\6G

2G的制式是GSM和CDMA，3G的制式应该是WCDMA、CDMA2000、TD-SCDMA和Wimax，4G的制式是LTE，而5G的制式则是被称为NR。

全球主要的2G制式是GSM和CDMA。

GSM是欧洲一个移动通信标准，欧洲吸取了1G失败的原因，在自己内部统一了标准，推出了GSM这个2G制式，并且得到了全球运营商的支持，是部署最广泛的2G制式。

CDMA是2G时代的后期之秀，2G时代的第一个商用版本是CDMA IS95。

3G时代有四个国际标准。

3G时代，最初只有三个国际标准，分别是欧洲的WCDMA、美国的CDMA2000、中国的TD-SCDMA。

3G时代，被最广泛部署，而且成熟度最高的是欧洲的WCDMA。2007年，美国的IT业跨界而来，强行的将Wimax确立为第四个3G国际标准。不过最后这个制式坑了一批设备商和运营商之后，就因为本身的问题（最大的问题是移动性太差)而夭折了。

4G时代有两个国际标准。

最初的时候，ITU(国际电联)只承认了两个标准是符合4G标准要求的，分别是LTE-A和Wimax后续演进的IEEE 802.16m。

LTE-A分为两支，一个是LTE-TDD-A，一个是LTE-FDD-A。不过后来这个标准被放宽了，LTE也被认为是4G标准。

LTE-TDD也就是我们常说的中国主导的4G标准--TD-LTE。

TD-LTE的部署国家要远比TD-SCDMA要多，这个标准也是全球主流被部署的标准。

5G时代暂时只有一个标准，那就是NR。

5G的标准，在3GPP组织之中，被称为NR(新空口)。NR是5G制式的名称，这个是3GPP组织大会通过的正式的名称。

3GPP讨论了4G 5G组网的八种方案，按照组网的实现，终端是否需要保持双连接，分为了NSA和SA两个类别。NSA和SA只不过是4G 5G组网方式的不同，并不是制式的名称。



MiB/s、MB/s、Mbit/s、Mbps

KiB，MiB和GiB，这三个标志是标准的计算机领域的术语，中间的i取自binary，表示二进制幂的计数：

1KiB = 1024 Byte

1MiB = 1024 KiB

1GiB = 1024 MiB

1TiB = 1024 GiB


1999年，国际电工委员会（IEC）公布了修正2：“IEC 60027-2：电工技术应用的字母符号 — 第二部分：通信和电子。”

这个标准，在1998年通过，介绍了词头“kibi-”、“mebi-”、“gibi-”、“tebi-”、“pebi-”、“exbi-”，作为二进制乘幂的计数方法。

要读懂这段规定。其内涵是定义了符号的规范用法。Mi、Ki、Gi代表的是二进制乘幂的计数方法。反过来讲，就是规范了一个标准，只要出现上述标志的，意味着这种使用是规范的。而我们日常使用的MB、KB等用法存在着很多歧义。这种硬性规定是出于学术上的考虑的。在实际使用中，MB的意义和MiB应该是等同的。

一般B大写指Byte，b小写指bit。

在计算机领域，B一般都是大写的。


#### 3GPP(The 3rd Generation Partnership Project)

3GPP的目标是实现由2G网络到3G网络的平滑过渡，保证未来技术的后向兼容性，支持轻松建网及系统间的漫游和兼容性。

3GPP主要是制订以GSM核心网为基础，UTRA(FDD为WCDMA技术，TDD为TD-CDMA技术)为无线接口的第三代技术规范。

#### ETSI(European Telecommunications Standards Institute)

欧洲电信标准化协会，ETSI作为一个被CEN（欧洲标准化协会）和CEPT（欧洲邮电主管部门会议）认可的电信标准协会，其制定的推荐性标准常被欧共体作为欧洲法规的技术基础而采用并被要求执行。

#### UMTS（Universal Mobile Telecommunications System）

即通用移动通信系统。

1988年，欧共体（CEC）开始一项“欧洲高级通信研究（RACE）”的发展计划，由欧洲26个研究单位联合开发更新一代的移动通信系统。称为“通用移动通信系统”，简称UMTS，欧洲电信标准协会（ETSI）负责UMTS的标准化工作，并与国际电联负责的第三代移动通信系统IMT-2000标准化工作协调一致。

UMTS作为一个完整的3G移动通信技术标准，并不仅限于定义空中接口。除WCDMA作为首选空中接口技术获得不断完善外，UMTS还相继引入了TD-SCDMA和HSDPA技术。它使用WCDMA作为底层标准，由3GPP定型。

#### GSM(Global System for Mobile Communication)

全球移动通信系统，由欧洲电信标准组织ETSI制订的一个数字移动通信标准。GSM 较之它以前的标准最大的不同是它的信令和语音信道都是数字式的，因此GSM被看作是第二代(2G)移动电话系统。这说明数字通讯从很早就已经构建到系统中。GSM是一个当前由3GPP开发的开放标准。虽然GSM作为一种起源于欧洲的第二代移动通信技术标准，但它的研发初衷就是让全球共同使用一个移动电话网络标准，让用户拥有一部手机就能走遍天下。

#### 2G(Second Generation)
由于GSM相对模拟移动通讯技术是第二代移动通信技术，所以简称2G。

#### 3G(Third Generation)
第三代移动通信技术。3G服务能够同时传送声音及数据信息，速率一般在几百kbps以上。3G是指将无线通信与国际互联网等多媒体通信结合的新一代移动通信系统，目前3G存在四种标准：CDMA2000(美国)、WCDMA、TD-SCDMA、WiMAX。

##### CDMA/CDMA2000 (Code Division Multiple Access)
码分多址

##### WCDMA(Wideband Code Division Multiple Access)
宽带码分多址

HSPA(High-Speed Packet Access)

WCDMA的R99和R4系统能够提供的最高上下行速率分别为64kbps和384kbps，为了能够与CDMA1XEV-DO抗衡，WCDMA在R5规范中引入了HSDPA，在R6规范中引入了HSUPA，HSDPA和HSUPA合称为HSPA。

HSDPA（High Speed Downlink Packet Access)

高速下行分组接入，是一种移动通信协议，亦称为3.5G(3½G)。该协议在WCDMA下行链路中提供分组数据业务，在一个5MHz载波上的传输速率可达8-10 Mbit/s（如采用MIMO技术，则可达20 Mbit/s）。
在具体实现中，采用了自适应调制和编码（AMC）、多输入多输出（MIMO）、混合自动重传请求（HARQ）、快速调度、快速小区选择等技术。

HSUPA((High Speed Uplink Packet Access)

高速上行链路分组接入。HSUPA通过采用多码传输、HARQ、基于Node B的快速调度等关键技术，使得单小区最大上行数据吞吐率达到5.76Mbit/s，大大增强了WCDMA上行链路的数据业务承载能力和频谱利用率。

HSPA+(High-Speed Packet Access+)

是HSPA的强化版本，最高的下行21Mbps，大部分HSPA+手机基本都是支持5.76Mbps的最高上行速度和21Mbps或者28Mbps的最高下行速度，相比较HSPA的速度更快。总的来说HSPA+比HSPA的速度更快，性能更好，技术更先进，同时网络也更稳定，是目前LTE技术运用之前的最快的网络！

#### LTE（Long Term Evolution，长期演进，3.9G)

因为LTE的接口与2G和3G网络互不兼容，所以LTE需同原有网络分频段运营。LTE是由3GPP组织制定的UMTS技术标准的长期演进。

LTE系统引入了OFDM（Orthogonal Frequency Division Multiplexing，正交频分复用）和MIMO（Multi-Input & Multi-Output，多输入多输出）等关键传输技术，显著增加了频谱效率和数据传输速率，并支持多种带宽分配：1.4MHz，3MHz，5MHz，10MHz，15MHz和20MHz等，且支持全球主流2G/3G频段和一些新增频段，因而频谱分配更加灵活，系统容量和覆盖也显著提升。LTE系统网络架构更加扁平化简单化，减少了网络节点和系统复杂度，从而减小了系统时延，也降低了网络部署和维护成本。LTE系统支持与其他3GPP系统互操作。

LTE系统有两种制式：FDD-LTE和TDD-LTE，即频分双工LTE系统和时分双工LTE系统，二者技术的主要区别在于空中接口的物理层上（像帧结构、时分设计、同步等）。FDD-LTE系统空口上下行传输采用一对对称的频段接收和发送数据，而TDD-LTE系统上下行则使用相同的频段在不同的时隙上传输，相对于FDD双工方式，TDD有着较高的频谱利用率。

#### 4G

指的是第四代移动通信技术，该技术包括TD-LTE和FDD-LTE两种制式。

4G是集3G与WLAN于一体，并能够传输高质量视频图像，它的图像传输质量与高清晰度电视不相上下。4G系统能够以100Mbps的速度下载，比目前的拨号上网快200倍，并能够满足几乎所有用户对于无线服务的要求。此外，4G可以在DSL和有线电视调制解调器没有覆盖的地方部署，然后再扩展到整个地区。很明显，4G有着不可比拟的优越性。


### OSI七层结构模型

OSI(Open System InterConnection Reference Model) 开放系统互联参考模型

主要包括：应用层（Application）、表示层（Presentation）、会话层（Session）、传输层（Transport）、网络层（Network）、数据链路层（Data Link）、物理层（Physical）。

- 应用层：确定通信对象，提供访问网络服务的接口。
- 表示层：负责数据的编码、转化（界面与二进制数据转换，高级语言与机器语言的转换）数据压缩、解压，加密、解密。根据不同应用目的处理为不同的格式，表现出来就是我们看到的各种各样的文件扩展名。
- 会话层：负责建立、维护、控制会话单工(Simplex)、半双工(Half duplex)、全双工(Full duplex)三种通信模式的服务。
- 传输层：负责分割、组合数据，实现端到端的逻辑连接三次握手(Three-way handshake)，面向连接(Connection-Oriented)或非面向连接(Connectionless-Oriented)的服务，流控(Flow control)等都发生在这一层。是第一个端到端，即主机到主机的层次。
- 网络层：负责管理网络地址，定位设备，决定路由。
- 数据链路层:负责准备物理传输，CRC校验，错误通知，网络拓扑，流控等。
- 物理层：物理链路，负责将数据以比特流的方式发送、接收。

| OSI 模型   | 主要协议                  | 单位   | 主要设备                            |
| ---------- | ------------------------- | ------ | ----------------------------------- |
| 应用层     | Telnet、FTP、HTTP、SNMP等 | 数据流 | 网关                                |
| 表示层     | CSS GIF HTML JSON XML GIF | 数据流 | 网关                                |
| 会话层     | FTP SSH TLS HTTP(S) SQL   | 数据流 | 网关                                |
| 传输层     | TCP UDP                   | 数据段 | 网关                                |
| 网络层     | IP(IPV4、IPV6) ICMP       | 数据包 | 路由器，网桥路由器                  |
| 数据链路层 | 802.2、802.3ATM、HDLC、   | 帧     | 交换机、网桥、网卡；以太网、无线网       |
| 物理层     | V.35、EIA/TIA-232         | 比特流 | 集线器、中继器；电缆光纤，发送器，接收器 |

实现了 网卡接口 的驱动程序，通过mac地址访问介质，处理数据在物理媒介上的传输。（交换机）
两个常用协议： ARP协议 以及 RARP协议，实现ip地址与机器物理地址转换（mac地址）。

ODPF（Open Shortest Path First）开放最短路由优先，动态更新路由。

数据链路层、网络层、传输层负责处理网络通信细节，必须稳定、高效，在内核空间实现。


#### 五层模型

主要包括：应用层（应用层、表示层、会话层）、传输层、网络层、数据链路层和物理层。 


#### TCP/IP 四层模型

TCP(Transmission Control Protocol) 

主要包括：应用层（应用层、表示层、会话层）、传输层、网际层（网络层）、网络接口层（数据链路层和物理层）。 

TCP/IP不是一个协议，而是一个协议族的统称。里面包括了IP协议，IMCP协议，TCP协议，以及我们更加熟悉的http、ftp、pop3协议等等。

TCP/IP协议族按照层次由上到下，层层包装。

##### 应用层

1) Telnet协议：远程登录服务；提供类似仿真终端的功能，支持用户通过终端共享其它主机的资源。
2) HTTP协议：超文本传输协议提供万维网浏览服务。
3) FTP协议：文件传输协议提供应用级的文件传输服务。
4) SMTP协议：简单邮件传输协议提供简单的电子邮件交换服务，能够在传送中接力传送邮件，即邮件可以通过不同网络上的主机接力式传送。
5) POP3协议：它规定怎样将个人电脑连接到Internet的邮件服务器和下载电子邮件的电子协议，是因特网电子邮件的第一个离线协议标准，POP3允许用户从服务器上把邮件存储到本地主机上，同时删除保存在邮件服务器上的邮件。
6) DNS协议：域名系统负责域名和IP地址的映射。

##### 传输层

1) TCP协议
2) UDP协议

TCP是面向连接的，利用TCP通信的两台主机首先要经历一个“拨打电话”的过程，等到通信准备结束才开始传输数据，最后结束通话。一个TCP数据的发送过程：

1) 双方建立连接
2) 发送方给接受方TCP数据报，然后等待对方的确认TCP数据报，如果没有，就重新发，如果有，就发送下一个数据报。
3) 接受方等待发送方的数据报，如果得到数据报并检验无误，就发送ACK(确认)数据报，并等待下一个TCP数据报的到来。直到接收到FIN(发送完成数据报)
4) 中止连接

(1)连接的建立
客户端首先向服务器申请打开某一个端口(用SYN段等于1的TCP报文)，然后服务器端发回一个ACK报文通知客户端请求报文收到，客户端收到确认报文以后再次发出确认报文确认刚才服务器端发出的确认报文

建立连接三次握手
第1帧，客户机发送SYN  Seq J;
第2帧，主机发送SYN  Seq K， ACK J+1;
第3帧，客户机发送SYN  Seq J+1， ACK K+1;
关闭连接四次挥手
第1帧，客户机发送FIN  Seq N， ACK M;请求断开
第2帧，主机发送Seq M， ACK N+1;确认，主机会断开
第3帧，主机发送FIN Seq M， ACK N+1;也请你断开
第4帧，客户机发送Seq N+1， ACK M+1;确认 客户机断开


62023 → 8080 [SYN] Seq=0 Win=65535 Len=0 MSS=16344 WS=32 TSval=1843604360 TSecr=0 SACK_PERM=1
8080 → 62023 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=16344 WS=32 TSval=1843604360 TSecr=1843604360 SACK_PERM=1
62023 → 8080 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=1843604360 TSecr=1843604360
[TCP Window Update] 8080 → 62023 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=1843604360 TSecr=1843604360
8080 → 62023 [ACK] Seq=1 Ack=547 Win=407744 Len=0 TSval=1843604370 TSecr=1843604370
62023 → 8080 [ACK] Seq=547 Ack=15371 Win=392928 Len=0 TSval=1843604431 TSecr=1843604431

8080 → 62023 [FIN, ACK] Seq=15371 Ack=547 Win=407744 Len=0 TSval=1843609394 TSecr=1843604431
62023 → 8080 [ACK] Seq=547 Ack=15372 Win=392928 Len=0 TSval=1843609394 TSecr=1843609394
62023 → 8080 [FIN, ACK] Seq=547 Ack=15372 Win=392928 Len=0 TSval=1843623798 TSecr=1843609394
8080 → 62023 [ACK] Seq=15372 Ack=548 Win=407744 Len=0 TSval=1843623798 TSecr=1843623798

WS(Window Scale), 4表示左移动4位，原来窗口大小是16为，现在是20为，现代扩大了4倍
SACK（Select ACKnowledgement）的目的就是当出现大量的报文丢失时增加恢复时间来用的，类似于累计ACK，就是说N多个ACK合成一个SACK。




tcp 协议头
本机端口    远端端口    序号    确认号    数据偏移    保留位   ...       窗口    校验和    紧急指针    选项      数据
 16bit     16bit     32bit   32bit      4bit      6bit   6bit      16bit   16bit    16bit     n\*32bit
数据偏移 5+n 个 32bit，选项前为5个32bit。


保留位：SEQ、、、CWR、ECN
CWR(Congestion Window Reduced)  简单来说就是网络不是很畅通了，通知对方减少阻塞窗口，发包速度发慢一点。
ECN（ECN-Echo）  ECN两个作用，在TCP三次握手时表明TCP端是否支持ECN；在传输数据时，发送方是无法知道网络是否畅通的，但是经过重重的路由后，路由根据网络的情况可以知道是否阻塞，路由会设置在IP层会设置的相应的标志，即接收端发现了拥塞。CWR为发送端缩小拥塞窗口标志，用来通知发送端它已经收到了设置ECN标志，应该减慢发包速度。

URG(urgent紧急)  这就是传说中的带外数据。因为TCP是没有消息边界的，假如有一种情况，你已经发送了一些数据，但是此时，你要发送一些数据优先处理，就可以设置这些标志，同时如果设置了这个标志，紧急指针也会设置为相应的偏移。当接受方收到URG数据时，不缓存在接收窗口，直接往上传给上层。具体的使用可以参考TCP带外数据。大体来说，就是，调用send和recv是要加上MSG_OOB参数。同时接收方要处理SIGURG信号。不过据说这个带外数据在实际上，用得很少。
ACK(acknowledgement确认)   表示响应
PSH(push推送)   告诉对方，我发这么多数据了，你可以处理了，不用缓冲在接收窗口了，直接交数据给上层吧。
RST(reset重置)   表示连接重置
SYN(synchronous同步)   表示建立连接
FIN(finish结束)   表示关闭连接


Frame:   物理层的数据帧概况  
Ethernet II: 数据链路层以太网帧头部信息 
Internet Protocol Version 4: 互联网层IP包头部信息  
Transmission Control Protocol:  传输层T的数据段头部信息，此处是TCP 
Hypertext Transfer Protocol:  应用层的信息，此处是HTTP协议

Tcp keep alive（tcp保持活动）

Retransmission 是超时重发

TCP segment of a reassembled PDU 被分片出来的包 SEQ和ACK都和原来的包一致

Tcp previous segment lost（tcp先前的分片丢失）

TCP Dup ACK（tcp重复应答）
Tcp acked lost segment（tcp应答丢失）
Tcp window update（tcp窗口更新）


UDP协议 不提供超时重传，出错重传等功能，是不可靠的协议。
UDP端口号 区分不同的程序所需要的数据包，端口号长度是16个bit，理论上可以有2^16个。
UDP检验和 可选的选项 但是RFC中标准要求，发送端应该计算检验和。
UDP长度 可以有65535字节那么长。但是一般网络在传送的时候，一次一般传送不了那么长的协议（涉及MTU），需要对数据分片，但UDP不需要关心分片。

IP分片 在IP头里面，16bit识别号唯一记录了一个IP包的ID，具有同一个ID的IP片将会被重新组装；而13位片偏移则记录了某IP片相对整个包的位置；而这两个表示中间的3bit标志则标示着该分片后面是否还有新的分片。这三个标示就组成了IP分片的所有信息，接受方就可以利用这些信息对IP数据进行重新组织

UDP和ARP之间的交互  某些系统会让每一个分片都发送一个ARP查询，所有的分片都在等待，但是接受到第一个回应的时候，主机却只发送了最后一个数据片而抛弃了其他（ICMP源站抑制差错）。

UDP协议的某些特性将会影响UDP服务器程序设计，大致总结如下：

1) 关于客户IP和地址：服务器必须有根据客户IP地址和端口号判断数据包是否合法的能力（这似乎要求每一个服务器都要具备）
2) 关于目的地址：服务器必须要有过滤广播地址的能力。
3) 关于数据输入：通常服务器系统的每一个端口号都会和一块输入缓冲区对应，进来的输入根据先来后到的原则等待服务器的处理，所以难免会出现缓冲区溢出的问题，这种情况下，UDP数据包可能会被丢弃，而应用服务器程序本身并不知道这个问题。
4) 服务器应该限制本地IP地址，就是说它应该可以把自己绑定到某一个网络接口的某一个端口上。


##### 网络层

1) IP协议：网际协议提供节点之间的分组投递服务。
2) ICMP协议：网际报文控制协议传输差错控制信息，以及主机/路由器之间的控制信息。
3) IGMP协议：网际组管理协议：使物理网络上的所有系统知道主机当前所在的多播组。
4) 多址广播：也称作多点传送，是一种一对多的传输方式，传输发起者通过一次传输就将信息传送到一组接收者，与单播传送和广播相对应。
5) 路由选择协议：实现路由选择，IP分组可实现直接或间接交付。

IP协议负责对数据加上IP地址和其他的数据以确定传输的目标。

TTL(生命周期) 8bit，规定该数据包在穿过多少个路由之后才会被抛弃。某个ip数据包每穿过一个路由器，该数据包的TTL数值就会减少1，当该数据包的TTL成为零，它就会被自动抛弃。这个字段的最大值也就是255。

##### 数据链路层

为待传送的数据加入一个以太网协议头，并进行CRC编码，为最后的数据传输做准备。

ARP协议用来找到目标主机的Ethernet网卡Mac地址，IP则承载要发送的消息。数据链路层可以从ARP得到数据的传送信息，而从IP得到要传输的数据信息。

主机不知道目标IP对应的是哪个主机的哪个接口，当主机要发送一个IP包的时候，会首先查一下自己的ARP高速缓存(就是一个IP-MAC地址对应表缓存)，不存在则主机向网络发送一个ARP协议广播包，这个广播包里面就有待查询的IP地址，而直接收到这份广播的包的所有主机都会查询自己的IP地址，如果收到广播包的某一个主机发现自己符合条件，那么就准备好一个包含自己的MAC地址的ARP包传送给发送ARP广播的主机，而广播主机拿到ARP包后会更新自己的ARP缓存。高速缓存是有时限的，一般是20分钟(伯克利系统的衍生系统)。

1) ARP协议：地址解析协议，实现IP地址向物理地址的映射。
2) RARP协议：反向地址解析协议，实现物理地址向IP地址的映射。
3) SLIP协议：串行线路网际协议，提供在串行通信线路上封装IP分组的简单方法。只支持固定IP地址。
4) PPP协议：点对点协议，利用电话线拨号上网的方式之一。

数据链路层的协议还是很多的，有我们最常用的以太网协议，也有不太常见的令牌环，还有FDDI，当然，还有国内现在相当普及的PPP协议（就是adsl宽带），以及一个loopback协议。

以太网（Ether-net）是指数字设备公司（Digital Equipment Corp.）、英特尔公司（Intel Corp.）和Xerox公司在1982年联合公布的一个标准，这个标准里面使用了一种称作CSMA/CD的接入方法。而IEEE802提供的标准集802.3也提供了一个CSMA/CD的标准。这两个标准稍有不同，TCP/IP协议对这种情况的处理方式如下:

 1) 以太网的IP数据报封装在RFC894中定义，而IEEE802网络的IP数据报封装在RFC1042中定义。
 2) 一台主机一定要能发送和接收RFC894定义的数据报。
 3) 一台主机可以接收RFC894和RFC1042的封装格式的混合数据报。
 4) 一台主机也许能够发送RFC1042数据报。如果主机能同时发送两种类型的分组数据，那么发送的分组必须是可以设置的，而且默认条件下必须是RFC894分组。

ppp协议是从SLIP的替代品。他们都提供了一种低速接入的解决方案。而每一种数据链路层协议，都有一个MTU（最大传输单元）定义，在这个定义下面，如果IP数据报过大，则要进行分片(fragmentation)，使得每片都小于MTU。打印出MTU的结果，如`netstat -in`。

环回接口（loopback）

1) 传给环回地址（一般是127.0.0.1）的任何数据均作为IP输入。
2) 传给广播地址或多播地址的数据报复制一份传给环回接口，然后送到以太网上。这是因为广播传送和多播传送的定义包含主机本身。
3) 任何传给该主机IP地址的数据均送到环回接口。

##### 硬件层

负责网络的传输，这个层次的定义包括网线的制式，网卡的定义等等。


### DNS

域名系统Domain Name System

1. 在互联网上需要用IP的，但事实上，我们在使用的时候，通常输入的是域名而不是IP。
2. 互联网上传输数据都是要用IP的，DNS所干的事，就是把域名转换为IP，也即域名解析。
3. 互联网上有非常多的域名服务器，共同完成域名解析功能。每个域名服务器内部会记录着一些域名和IP的对应（以及其他一些类似的数据），每条这样的数据称为一个记录。

#### 概述

域名系统是分层和分散的命名系统，用于识别可通过Internet或其他Internet 协议(IP) 网络访问的计算机、服务和其他资源。DNS 中包含的资源记录将域名与其他形式的信息相关联。这些最常用于将人类友好的域名映射到计算机使用底层网络协议定位服务和设备所需的数字IP 地址，但随着时间的推移已经扩展以执行许多其他功能。自 1985 年以来，域名系统一直是 Internet 功能的重要组成部分。

使用更简单、更容易记住的名称代替主机的数字地址可以追溯到 ARPANET 时代。斯坦福研究所（现为SRI International ）维护了一个名为HOSTS.TXT的文本文件，该文件将主机名映射到 ARPANET 上计算机的数字地址。Elizabeth Feinler开发并维护了第一个 ARPANET 目录。数字地址的维护，称为分配号码列表，由南加州大学信息科学研究所(ISI) 的Jon Postel负责，他的团队与 SRI 密切合作。

地址是手动分配的。通过 Feinler 指导的 SRI网络信息中心(NIC) 在工作时间致电，将计算机及其主机名和地址添加到主文件中。后来，Feinler 在 NIC 的服务器上建立了WHOIS目录，用于检索有关资源、联系人和实体的信息。她和她的团队开发了域的概念。Feinler 建议域应该基于计算机物理地址的位置。例如，教育机构的计算机将具有edu域。她和她的团队从 1972 年到 1989 年管理着主机命名注册表。

到 1980 年代初，维护一个单一的集中式主机表变得缓慢且笨重，新兴的网络需要一个自动命名系统来解决技术和人员问题。Postel 将在五个相互竞争的解决方案提案之间达成妥协的任务交给了Paul Mockapetris。Mockapetris 于 1983 年创建了域名系统。

互联网工程任务组于 1983 年 11 月在 RFC 882 和 RFC 883 中发布了原始规范。

1984 年，加州大学伯克利分校的四名学生 Douglas Terry、Mark Painter、David Riggle 和 Songnian Zhou为伯克利互联网名称域（通常称为BIND ）编写了第一个Unix名称服务器实现。1985 年，DEC的 Kevin Dunlap大幅修改了 DNS 实施。从那时起， Mike Karels、Phil Almquist 和Paul Vixie一直在维护 BIND。在 1990 年代初期，BIND 被移植到Windows NT平台。

1987 年 11 月，RFC 1034 和 RFC 1035 取代了 1983 年的 DNS 规范。一些额外的征求意见书已提议对核心 DNS 协议进行扩展。

#### DNS根服务器架构

A INTERNIC.NET（美国，弗吉尼亚州） 198.41.0.4；2001:503:ba3e::2:30
B 美国信息科学研究所（美国，加利弗尼亚州） 192.228.79.201；2001:500:84::b
C PSINet（美国，弗吉尼亚州） 192.33.4.12；2001:500:2::c
D 马里兰大学（美国马里兰州） 199.7.91.13；2001:500:2d::d
E 美国航空航天管理局（美国加利弗尼亚州） 192.203.230.10；2001:500:a8::e
F 因特网软件联盟（美国加利弗尼亚州） 192.5.5.241；2001:500:2f::f
G 美国国防部网络信息中心（美国弗吉尼亚州） 192.112.36.4；2001:500:12::d0d
H 美国陆军研究所（美国马里兰州） 198.97.190.53；2001:500:1::53
I Netnod（瑞典，斯德哥尔摩） 192.36.148.17；2001:500:7fe::53
J VeriSign（美国，弗吉尼亚州） 192.58.128.30；2001:503:c27::2:30
K RIPE NCC（英国，伦敦） 193.0.14.129；2001:7fd::1
L ICANN（美国，弗吉尼亚州） 199.7.83.42；2001:500:9f::42
M WIDE Project（日本，东京） 202.12.27.33；2001:dc3::35

根服务器主要用来管理互联网的主目录，全世界只有13台。这13台根域名服务器中名字分别为“A”至“M”，其中10台设置在美国，另外各有一台设置于英国、瑞典和日本。1个为主根服务器，放置在美国。其余12个均为辅根服务器，其中9个放置在美国，欧洲2个，位于英国和瑞典，亚洲1个，位于日本。

所有根服务器均由美国政府授权的互联网域名与号码分配机构ICANN统一管理，负责全球互联网域名根服务器、域名体系和IP地址等的管理。

这13台根服务器可以指挥Firefox或Internet Explorer这样的Web浏览器和电子邮件程序控制互联网通信。

由于根服务器中有经美国政府批准的260个左右的互联网后缀（如．com、．net等）和一些国家的指定符（如法国的．fr、挪威的．no等），自成立以来，美国政府每年花费近50多亿美元用于根服务器的维护和运行，承担了世界上最繁重的网络任务和最巨大的网络风险。

##### DNS根镜像服务器

DNS根服务器的镜像服务器

镜像服务器(Mirror server)与主服务器的服务内容都是一样的，只是放在一个不同的地方，分担主机的负载。

截至2014年10月，全球有504台根服务器，被编号为A到M共13个标号。大部分借由任播（Anycast）技术，编号相同的根服务器使用同一个IP，504台根服务器总共只使用13个IP，因此可以抵抗针对其所进行的分布式拒绝服务攻击（DDoS）。

中国大陆在北京有三台编号为L的镜像，编号为F、I、J的镜像各一台，共6台；香港有编号为D、J的镜像各2台，编号为A、F、I、L的镜像各一台，共8台；台湾则有编号为F、I、J各一台，共3台。

##### DNS协议

DNS协议的最初定义要从20世纪80年代未期开始算起，它使用了端口上的UDP和TCP协议。

UDP通常用于查询和响应，TCP用于主服务器和从服务器之间的区传送.遗憾的是，在所有UDP实现中能保证正常工作的最大包长是512字节，对于在每个包中必须含有数字签名的一些DNS新特性（例如，DNSSEC）来说实在是太小了。

512字节的限制还影响了根服务器的数量和名字。

要让所有的根服务器数据能包含在一个512字节的UDP包中，根服务器只能限制在13个，而每个服务器要使用字母表中的单个字母命名。

以太网数据的长度必须在46-1500字节之间，这是由以太网的物理特性决定的。

事实上，这个1500字节就是网络层IP数据包的长度限制，理论上，IP数据包最大长度是65535字节。

这是由IP首部16比特总长度所限制的，去除20字节IP首部和8个字节UDP首部，UDP数据包中数据最大长度为65507字节。

在Internet数据传输中，UDP数据长度控制在576字节（Internet标准MTU值），而在许多UDP应用程序设计中数据包被限制成512字节或更小。这样可以防止数据包的丢失。

许多解析器首先发送一条UDP查询，如果它们接收到一条被截断的响应，则会用TCP重新发送该查询。

这个过程绕过了512字节的限制，但是效率不高。您或许认为DNS应该避开UDP，总是使用TCP，但是TCP连接的开销大得多。

一次UDP名字服务器交换可以短到两个包：一个查询包、一个响应包。一次TCP交换则至少包含7个包：三次握手初始化TCP会话、一个查询包、一个响应包以及最后一次握手来关闭连接。

##### 根域文件

所有根域名服务器都是以同一份根域文件返回顶级域名权威服务器（包括通用顶级域和国家顶级域），文件只有550KB大小。截至2004年12月12日，一共记录了258个顶级域和773个不同的顶级域权威服务器。对于没被收录的顶级域，通过根域名服务器是没法查出相应的权威服务器。

##### 顶级域

顶级域分为国家及地区顶级域、通用顶级域、基础建设顶级域(.arpa(用于反向查询))和国际顶级域(IDN)

国家及地区代码顶级域（Country Code top-level domain,ccTLD），是用两字母的国家或地区名缩写代称的顶级域，其域名的指定及分配，政治因素考量在技术和商业因素之上。这些顶级域均由两个字母组成，大部分使用ISO 3166-1标准。

2002年时共有243个国家及地区顶级域。

2010年起，互联网号码分配局开始分配国际化国家及地区顶级域，这项改变使得国码域名可以使用当地文字，例如增加了中文国码域名(.中国及.中國、.香港、.台湾及.台灣)，国际化国码域名也不限于两个字（例如.新加坡是三个字）。

到2016年4月为止，共有303个国家及地区顶级域。

通用顶级域（Generic top-level domain, gTLD）是互联网名称与数字地址分配机构（IANA）管理的顶级域（TLD）之一。该机构专门负责互联网的域名系统。如.com;.info;.net及.org。

一个域名的所有者可以通过查询WHOIS数据库而被找到；对于大多数根域名服务器，基本的WHOIS由ICANN维护，而WHOIS的细节则由控制那个域的域注册机构维护。

对于国家及地区顶级域名，通常由该域名权威注册机构负责维护WHOIS。例如中国互联网络信息中心（China Internet Network Information Center）负责.CN域名的WHOIS维护，香港互联网注册管理有限公司（Hong Kong Internet Registration Corporation Limited）负责.HK域名的WHOIS维护，台湾网络信息中心（Taiwan Network Information Center）负责.TW域名的WHOIS维护。

##### 域维护

域维护是指通过DNS协议来在主域名服务器和从域名服务器之间维护同一个zone文件。

DNS中有两种域维护手段，一种是全量传输AXFR(full zone transfer)，另一种是增量传输IXFR(incremental zone transfer)。

1. 全量传输AXFR

全量传输时，从域名服务器从主域名服务器上请求zone文件，poll的时间间隔由SOA(Start of Authority)记录中的refresh标签定义。请求zone文件的过程是从域名服务器向主域名服务器发送查询来实现，如果主域名服务器中SOA记录中的序列号(serial number标签定义)大于从域名服务器SOA记录的序列号，从域名服务器就会向主域名服务器发送全量传输请求。所以主域名服务器一旦改变了zone文件，则需要增加它该zone中的序列号。

通常情况下，序列号sn遵循“年+月+日+编号”的格式，如2003080803表示该zone是2003年8月8日的第三次更新。

全量传输时在TCP的53端口上进行。

2. 增量传输(IXFR)

传递非常大的zone文件是非常耗资源的（时间、带宽等），尤其是只有zone中的一个记录改变的时候，没有必要传递整个zone文件，增量传输是允许主域名服务器和从域名服务器之间只传输那些改变的记录。

需要注意的是，不是所有的域名服务器都支持增量传输，当不支持增量传输时，主从间就采用全量传输的方式。

3. 通告(NOTIFY)

从服务器每隔refresh时间向主服务器发送请求，只有主服务器的SOA中的序列号大于从服务器的序列号才传输，但是如果这个时间间隔比较大的话（比如12个小时），快速变化的网络环境可能不允许有如此大时间的差异。所以在实现了通告消息的DNS集群中，DNS主服务器的zone文件发生改变后，它立即向从服务器发送一个NOTIFY消息，告诉从服务器我的zone文件发生改变了，接着从服务器马上对比两者的序列号，再采用上面介绍的全量传输或者增量传输的方法请求zone文件。BIND本身支持通告，通告的配置是在named.conf中的zone中的option中配置，配置指令是notify, also-notify和notify-source。

4. 动态更新

每次需要更新zone文件的时候都需要停止域名服务器并重启，这样当zone文件很多的时候域名服务器重启时加载zone文件需要很多的时间。所以需要有一种不停止查询服务而且快速更新zone文件地方机制，这种机制主要有两种：

一种是允许外部进程在服务器运行的时候更新zone文件；

另外一种是将zone中的资源记录RR存储在数据库中，每次查找zone中记录的时候动态读取。

##### DNS 安全

1. zone文件受到的威胁可能有：文件被无意或有意篡改或删除。这种威胁是较好应对的，最主要的方法是制定很好的系统管理策略，zone文件和其他的配置文件需要严格而安全的读写权限。
2. 动态更新和域传输受到的威胁可能有：未授权的更新、zone文件在传输过程中被篡改（经常是把域名篡改为别的IP）。这种威胁通常的应对方法是TSIG(Transaction SIGnature)策略（这个策略定义在RFC2845中）。TSIG策略中会计算出一个key，这个key是通过单向散列(能轻松地从输入得出值，但很难通过值猜出输入)计算出来的，然后传输zone文件的双方在传输过程中都带上这个key，如果key不对就拒绝传输。
3. 远程查询受到的威胁可能有：cache污染（IP欺骗、数据拦截或错误的master主机地址）。cache污染是指cache中内容可能将您的域名重定向到了一个错误的服务器。这种威胁通常的应对方法是域名系统安全扩展（DNSSEC, Domain Name System Security Extensions），它是为DNS客户端（解析器）提供的的DNS数据来源，数据完整性验证，但不提供或机密性和认证的拒绝存在扩展集。

中国用户在访问带有.com等后缀的国外网站时，大多仍需要经过国外的域名服务器进行解析，中美海底光缆一旦发生断裂，便会发生解析问题，中国东部、太平洋西海岸地区，属于地震多发地带，再加上台风等环境因素影响，形势显得更加严峻。

美国控制了域名解析的根服务器，也就控制了相应的所有域名，如果美国不想让人访问某些域名，就可以屏蔽掉这些域名，使它们的IP地址无法解析出来，那么这些域名所指向的网站就相当于从互联网的世界中消失了。比如，2004年4月，由于“.ly”域名瘫痪，导致利比亚从互联网上消失了3天。

攻击整个因特网最有力、最直接，也是最致命的方法恐怕就是攻击根域名服务器了。

1997年7月，这些域名服务器之间自动传递了一份新的关于因特网地址分配的总清单，然而这份清单实际上是空白的。这一人为失误导致了因特网出现最严重的局部服务中断，造成数天之内网面无法访问，电子邮件也无法发送。

2002年的10月21日美国东部时间下午4:45开始，这13台服务器又遭受到了有史以来最为严重的也是规模最为庞大的一次网络袭击。此次受到的攻击是DDoS攻击，超过常规数量30至40倍的数据猛烈地向这些服务器袭来并导致其中的9台不能正常运行。7台丧失了对网络通信的处理能力，另外两台也紧随其后陷于瘫痪。10月21日的这次攻击对于普通用户来说可能根本感觉不到受到了什么影响。

#### 中国互联网络信息中心

中国互联网络信息中心（China Internet Network Information Center，缩写为CNNIC），于1997年6月3日成立的互联网管理和服务机构。

中国互联网络信息中心成立伊始，由中国科学院主管、中国科学院计算机网络信息中心（CNIC）实际运行；2014年末，改由中央网络安全和信息化委员会办公室（国家互联网信息办公室）主管；2019年，改由工业和信息化部主管。现总部位于北京市中关村南四街4号中国科学院软件园1号楼。

中国的顶级域名.cn和中文域名注册管理机构

##### 争议

1. CNNIC制作的上网辅助软件“中文上网官方版软件”因其强制安装和无法彻底卸载，一度被北京市网络行业协会列入10款流氓软件名单并勒令整改。为此，CNNIC起诉把它列为流氓软件的杀毒软件制作者。

2. 有杀毒软件制作者批评CNNIC，打着官方的旗号，混淆该软件与中文域名之区别，令公众误以为国家发展中文域名，就等于支持该软件。

3. 2008年，CNNIC收回被抢注的奥运冠军域名，被回收者表示不服。

4. 2009年12月9日，CNNIC被中国中央电视台《焦点访谈》曝光对.cn域名管理不善，致使色情网站可以轻而易举地更换域名。12月11日晚，CNNIC发出公告，公告暗指从2009年12月14日9时起，禁止个人注册CN域名。2010年1月底，CNNIC要求所有cn域名提交个人身份证复印件，由于没有出台适当的隐私保护条例，遭cn域名持有者抵制，不得已将个人身份证信息提交的最后的期限推迟到3月15日。但是提交信息的并不多。

5. 2009年，中国互联网络信息中心（CNNIC）的一名员工向Mozilla申请要求将 CNNIC 加入 Mozilla 的 根证书列表，并且得到了批准。后来微软也把 CNNIC加到了Windows的根证书列表里。2015年，因CNNIC发行的一个中级CA被发现发行了Google域名的假证书，许多用户选择不信任CNNIC颁发的数字证书。并引起对CNNIC滥用证书颁发权力的担忧。2015年4月2日，Google宣布不再承认CNNIC所颁发的电子证书。4月4日，继Google之后，Mozilla也宣布不再承认CNNIC所颁发的电子证书。2016年8月，CNNIC官方网站已放弃使用自行发行的根证书签发的站点证书，改用由DigiCert颁发的证书。

#### DNS务器
##### 公共DNS服务器

谷歌公共DNS：8.8.8.8；8.8.4.4

南京信风 114DNS：114.114.114.114；114.114.115.115 有植入广告嫌疑。
114DNS安全版：114.114.114.119；114.114.115.119
114DNS家庭版：114.114.114.110；114.114.115.110

腾讯 DNSPod DNS+：119.29.29.29；119.28.28.28；182.254.118.118；182.254.116.116
360 DNS派：101.226.4.6；218.30.118.6
BAI DNS : 223.113.97.99
PdoMo-DNS：101.132.183.99；193.112.15.186
FUN DNS：119.23.248.241
骆驼云安全DNS：63.223.94.66
CuteDNS：123.206.61.167；119.29.105.234；101.236.28.23；120.77.212.84
P站DNS：123.207.137.88；115.159.220.214；115.159.146.99；123.206.21.48
HI!XNS（纯净无劫持）：40.73.101.101

微步在线 oneDNS 纯净版：117.50.10.10；52.80.52.52 节点少，速率一般，微步在线优势在于恶意拦截，纯净版不推荐。
微步在线 oneDNS 拦截版：117.50.11.11；52.80.66.66 内置的威胁拦截引擎可大幅度减少网民上网受到恶意网站攻击的危害。

CFIEC Public DNS IPv6：240c::6666；240c::6644 我国首个IPv6公共DNS

CNNIC SDNS：1.2.4.8；210.2.4.8；2001:dc7:1000::1 中央政府权威公共DNS解析系统，不做任何评价。
清华大学TUNA DNS666：101.6.6.6；2001:da8::666 教育网首选，解析结果纯净。
百度 BaiduDNS：180.76.76.76；2400:da00::6666
阿里 AliDNS：223.5.5.5；223.6.6.6；2400:3200::1；2400:3200:baba::1
中国科学技术大学 DNS：教育网：202.38.95.110；电信：202.141.160.110；移动：202.141.176.110；2001:da8:d800:95::110 多次改动DNS服务器IP，稳定性较差，支持纯净解析及5353特殊端口。


##### 中国电信DNS

58.217.249.137     58.217.249.138 江苏省南京市 南京信风网络科技有限公司DNS服务器电信节点
58.217.249.160     58.217.249.161 江苏省南京市 南京信风网络科技有限公司DNS服务器电信节点
59.51.78.210     59.51.78.211 湖南省
60.191.244.5     60.191.244.5 浙江省金华市
61.128.128.68     61.128.128.68 重庆市
61.128.192.68     61.128.192.68 重庆市
61.130.254.34     61.130.254.36 浙江省湖州市
61.132.163.68     61.132.163.68 安徽省
61.134.1.4     61.134.1.4 陕西省西安市 电信DNS
61.134.1.5     61.134.1.5 陕西省西安市
61.139.2.69     61.139.2.69 四川省成都市
61.139.39.73     61.139.39.73 四川省泸州市
61.139.54.66     61.139.54.66 四川省凉山州西昌市
61.147.37.1     61.147.37.1 江苏省
61.153.81.75     61.153.81.75 浙江省宁波市
61.166.150.101     61.166.150.101 云南省昆明市
61.166.150.123     61.166.150.123 云南省
61.166.150.139     61.166.150.139 云南省昆明市
61.177.7.1     61.177.7.1 江苏省苏州市
61.187.98.3     61.187.98.3 湖南省株洲市
61.187.98.6     61.187.98.6 湖南省株洲市

112.100.100.100     112.100.100.100 黑龙江省 电信DNS
113.111.211.22     113.111.211.22 广东省广州市
116.228.111.118     116.228.111.118 上海市
116.228.111.18     116.228.111.18 上海市
118.118.118.1     118.118.118.1 上海市 (全国通用)
118.118.118.118     118.118.118.118 上海市 (全国通用)
168.95.1.1     168.95.1.1 台湾省 中华电信(HiNet)数据中心DNS服务器
168.95.192.11 68.95.192.1 台湾省 中华电信(HiNet)数据中心DNS服务器
180.168.255.18     180.168.255.18 上海市
180.76.76.76     180.76.76.76 北京市 北京百度网讯科技有限公司公共DNS服务器(电信节点)
202.100.192.68     202.100.192.68 海南省
202.100.199.8     202.100.199.8 海南省三亚市
202.100.96.68     202.100.96.68 宁夏银川市
202.101.107.85     202.101.107.85 福建省泉州市
202.101.172.35     202.101.172.35 浙江省杭州市
202.101.172.47     202.101.172.47 浙江省杭州市
202.101.224.68     202.101.224.71 江西省
202.101.226.68     202.101.226.69 江西省九江市
202.101.6.2     202.101.6.2 上海市
202.101.98.55     202.101.98.55 福建省福州市
202.102.199.68    202.102.199.68 安徽省芜湖市
202.102.200.101     202.102.200.101 安徽省蚌埠市
202.102.213.68     202.102.213.68 安徽省
202.102.3.141     202.102.3.141 江苏省常州市
202.102.3.144     202.102.3.144 江苏省常州市
202.102.7.90     202.102.7.90 江苏省扬州市
202.102.8.141     202.102.8.141 江苏省南通市
202.103.0.117     202.103.0.117 湖北省武汉市
202.103.0.68     202.103.0.68 湖北省武汉市
202.103.176.22     202.103.176.22 广东省茂名市
202.103.224.68     202.103.224.68 广西南宁市
202.103.225.68     202.103.225.68 广西柳州市
202.103.24.68     202.103.24.68 湖北省武汉市
202.103.44.150     202.103.44.150 湖北省武汉市
202.96.103.36     202.96.103.36 浙江省
202.96.104.15     202.96.104.16 浙江省宁波市
202.96.104.25     202.96.104.26 浙江省宁波市
202.96.107.27     202.96.107.29 浙江省绍兴市
202.96.128.166     202.96.128.166 广东省广州市
202.96.128.68     202.96.128.68 广东省广州市
202.96.128.86     202.96.128.86 广东省广州市
202.96.134.133     202.96.134.133 广东省深圳市
202.96.134.33     202.96.134.33 广东省深圳市
202.96.144.47     202.96.144.47 广东省汕头市
202.96.154.15     202.96.154.15 广东省深圳市
202.96.209.133     202.96.209.133 上海市
202.96.209.5     202.96.209.6 上海市
202.96.96.68     202.96.96.68 浙江省杭州市
202.98.192.67     202.98.192.67 贵州省
202.98.198.167     202.98.198.167 贵州省
202.98.224.68     202.98.224.68 西藏拉萨市
202.98.96.68     202.98.96.68 四川省成都市
210.200.211.193     210.200.211.193 台湾省 亚太电信股份有限公司DNS服务器
210.200.211.225     210.200.211.225 台湾省 亚太电信股份有限公司DNS服务器
218.2.135.1     218.2.135.1 江苏省南京市
218.2.2.2     218.2.2.2 江苏省南京市
218.4.4.4     218.4.4.4 江苏省苏州市
218.6.200.139     218.6.200.139 四川省成都市
218.76.192.100     218.76.192.101 湖南省邵阳市
218.85.152.99     218.85.152.99 福建省福州市
218.85.157.99     218.85.157.99 福建省福州市
218.89.0.124     218.89.0.124 四川省乐山市
219.141.136.10     219.141.136.10 北京市
219.141.140.10     219.141.140.10 北京市
219.141.148.37     219.141.148.37 北京市
219.141.148.39     219.141.148.39 北京市
219.146.0.130     219.146.0.130 山东省济南市
219.146.1.66     219.146.1.66 山东省 (济南省际节点)
219.147.1.66     219.147.1.66 山东省 (济南省际节点)
219.147.198.230     219.147.198.230 黑龙江省齐齐哈尔市
219.148.204.66     219.148.204.66 辽宁省沈阳市 (全省通用)
219.149.194.55     219.149.194.56 吉林省长春市
219.149.6.99     219.149.6.99 辽宁省大连市
219.150.32.132     219.150.32.132 天津市
220.168.208.3     220.168.208.3 湖南省常德市
220.168.208.6     220.168.208.6 湖南省常德市
220.170.64.68     220.170.64.68 湖南省衡阳市
220.181.70.210     220.181.70.210 北京市 电信互联网数据中心公众DNS服务器
220.187.24.2     220.187.24.2 浙江省舟山市
220.187.24.6     220.187.24.6 浙江省舟山市
221.228.255.1     221.228.255.1 江苏省无锡市
221.232.129.30     221.232.129.30 湖北省武汉市
222.172.200.68     222.172.200.68 云南省
222.221.0.9     222.221.0.12 云南省昆明市
222.221.5.240     222.221.5.241 云南省昆明市 云南电信公众信息产业有限公司DNS服务器
222.222.222.222     222.222.222.222 河北省石家庄市
222.243.129.81     222.243.129.81 湖南省
222.75.152.129     222.75.152.129 宁夏银川市
222.85.85.85     222.85.85.85 河南省
222.88.88.88     222.88.88.88 河南省洛阳市

##### 中国移动DNS

112.4.0.55     陕西 西安
211.103.13.101    江苏 无锡
211.103.55.50     江苏 苏州
211.136.112.50 上海
211.136.150.66 上海
211.136.17.107    湖北 荆州
211.136.17.108   广西 南宁
211.136.18.171   广东 深圳
211.136.192.6     广东
211.136.20.203    湖北 咸宁
211.136.20.204   广东 广州
211.136.28.228    北京
211.136.28.231    北京
211.136.28.234    北京
211.136.28.237    北京
211.137.130.19    陕西
211.137.130.3     陕西 西安
211.137.160.185 天津
211.137.160.5   天津
211.137.191.26    山东 济南
211.137.241.34 黑龙江 哈尔滨
211.137.241.35 黑龙江 哈尔滨
211.137.32.178   辽宁 沈阳
211.137.58.20      湖北 武汉
211.137.64.163    湖北 武汉
211.137.82.4     四川
211.138.106.18    山西
211.138.106.19    山西
211.138.106.2     山西 吕梁
211.138.106.3     山西
211.138.106.7     山西 运城
211.138.13.66    河北 邯郸
211.138.151.161  福建 福州
211.138.156.66    福建 福州
211.138.164.6   海南 海口
211.138.180.2     安徽 淮北
211.138.180.3     安徽 淮北
211.138.200.69    江苏 常州
211.138.242.18   广西 南宁
211.138.245.180  广西
211.138.30.66     北京
211.138.75.123  青海 西宁
211.138.91.1       内蒙古 巴彦淖尔
211.138.91.2    内蒙古 呼和浩特
211.139.136.68   广东
211.139.163.6    广东
211.139.29.68      云南
211.139.5.29    贵州 贵阳
211.139.5.30    贵州 贵阳
211.139.73.34    西藏 拉萨
211.139.73.35    西藏 拉萨
211.140.10.2     浙江 金华
211.140.13.188    浙江 杭州
211.140.188.188  浙江 舟山
211.140.197.58   辽宁 大连
211.141.0.99    吉林 吉林
211.141.16.99       吉林
211.141.85.68     江西 南昌
211.141.90.68     江西 赣州
211.141.90.69     江西 南昌
211.142.210.100 湖南 湘潭
211.142.210.101 湖南 岳阳
211.142.210.98 湖南 株洲
211.142.210.99 湖南 长沙
211.142.236.87 湖南 株洲
211.143.181.178  福建 福州
211.143.181.179  福建 福州
211.143.60.56    河北 石家庄
218.200.6.139      陕西 西安
218.201.124.18    山东 淄博
218.201.124.19    山东 淄博
218.201.17.2     重庆
218.201.21.132    重庆
218.201.4.3     重庆
218.201.96.130    山东 烟台
218.202.1.166     云南 昭通
218.202.152.130 新疆 乌鲁木齐
218.202.152.131 新疆 乌鲁木齐
218.203.160.194 甘肃 兰州
218.203.160.195 甘肃 兰州
218.207.128.4     福建 泉州
218.207.130.118  福建 泉州
218.207.217.241  福建 福州
218.207.217.242  福建 福州
221.130.13.133    江苏 南京
221.130.162.223  安徽 安庆
221.130.32.100    北京
221.130.32.103    北京
221.130.32.106    北京
221.130.32.109    北京
221.130.33.52      北京
221.130.33.60      北京
221.130.56.241    江苏 无锡
221.131.143.69    江苏 徐州
221.176.88.95   海南 海口
221.179.35.81     重庆
221.179.38.7     重庆

##### 中国联通DNS

58.22.96.66  福建省
58.240.57.33  江苏省南京市
58.241.208.46  江苏省盐城市
58.242.2.2  安徽省合肥市
60.12.166.166  浙江省金华市
61.135.164.13 61.135.164.18 北京市

113.207.20.15 113.207.20.18 重庆市 阿里巴巴(中国)有限公司公共DNS服务器联通节点
119.6.6.6  四川省成都市
123.125.81.6  北京市 上海聚流软件科技有限公司公共DNS服务器联通节点
124.161.97.234  四川省
124.161.97.238  四川省
124.161.97.242  四川省
140.207.198.6  上海市 上海聚流软件科技有限公司公共DNS服务器联通节点
202.102.134.68 202.102.134.70 山东省青岛市
202.102.152.3  山东省济南市
202.102.154.3  山东省济南市
202.102.224.68  河南省
202.102.227.68  河南联通xDSL
202.106.0.20  北京市
202.106.196.115 北京市
202.106.196.233 202.106.196.234 北京市
202.106.46.151  北京市
202.96.64.68  辽宁省沈阳市
202.96.69.38  辽宁省大连市
202.96.75.68  辽宁省沈阳市
202.96.86.18  辽宁省抚顺市
202.97.224.68 202.97.224.69 黑龙江省
202.98.0.68  吉林省长春市
202.98.1.11  吉林省长春市
202.98.5.68  吉林省长春市
202.99.104.68  天津市
202.99.160.68  河北省
202.99.166.4  河北省
202.99.168.8  河北省保定市
202.99.192.66  山西省太原市
202.99.192.68  山西省太原市
202.99.224.67  内蒙古呼和浩特市(cns)
202.99.224.68  内蒙古呼和浩特市(nmdns)
202.99.224.8  内蒙古呼和浩特市(netcool)
202.99.96.68  天津市
203.93.185.33 203.93.185.34 新疆乌鲁木齐市
210.21.196.6  广东省深圳市
210.22.70.3  上海市
211.90.72.65  内蒙古呼和浩特市
211.90.80.65  山西省太原市
211.91.88.129  安徽省合肥市
211.92.136.81  贵州省贵阳市
211.93.24.129  黑龙江省哈尔滨市
211.93.64.129  吉林省(全省通用)
211.95.1.97  上海市
211.95.193.97  广东省广州市
211.95.72.1  上海市
211.97.64.129 211.97.64.130 广西南宁市
211.97.96.65  海南省海口市
218.104.111.114  湖北省武汉市
218.104.111.122  湖北省武汉市
218.104.128.106  福建省
218.104.32.106  江苏省苏州市
218.24.249.18  辽宁省盘锦市
218.24.249.2  辽宁省盘锦市
218.29.106.250  河南省郑州市
218.29.117.126  河南省郑州市
218.29.12.166  河南省南阳市
218.29.122.70  河南省郑州市
218.29.156.138  河南省三门峡市
218.29.172.149  河南省濮阳市
218.29.174.166  河南省濮阳市
218.29.188.210  河南省郑州市
218.29.188.243  河南省郑州市
218.29.193.118  河南省郑州市
218.29.203.182 18.29.203.18 河南省郑州市
218.29.209.106  河南省郑州市
218.29.222.108  河南省郑州市新密市
218.29.223.150  河南省郑州市新密市
218.29.228.70  河南省郑州市巩义市
218.29.236.14  河南省郑州市
218.29.237.82  河南省郑州市
218.29.254.154  河南省漯河市
218.29.39.19  河南省南阳市
218.29.4.227  河南省南阳市
218.29.4.249  河南省南阳市
218.29.42.233  河南省南阳市
218.29.5.148  河南省南阳市
218.29.7.233  河南省南阳市
218.29.72.222 18.29.72.22 河南省郑州市
218.29.90.149  河南省郑州市
220.248.192.12 220.248.192.13 江西省南昌市
221.11.132.2  海南省海口市
221.12.1.226 221.12.1.228 浙江省杭州市
221.12.33.227 221.12.33.228 浙江省宁波市
221.12.65.227 221.12.65.228 浙江省温州市
221.3.131.11 221.3.131.12 云南省
221.4.66.66  广东省广州市
221.5.203.86  重庆市
221.5.203.90  重庆市
221.5.203.98 221.5.203.99 重庆市
221.6.4.66 221.6.4.67 江苏省南京市
221.7.1.20 221.7.1.21 新疆
221.7.128.68  广西南宁市
221.7.136.68  广西柳州市
221.7.34.10  甘肃省兰州市
221.7.92.86  重庆市
221.7.92.98  重庆市


#### DNS记录

递归DNS所采用的递归式查询

##### NS记录

如果DNS给你回应一条NS记录，就是告诉你，这个家伙是某个域的权威DNS，有事你去问它。

##### A记录

A记录就是最经典的域名和IP的对应。

##### CNAME记录

这种记录比较有趣，你问DNS一个域名，它回CNAME记录，意思是说，你要解析的这个域名，还有另一个域名(也就是别名)，你去解析那个好了。

#### DNS 缓存

操作系统缓存

应用缓存


### IP地址

#### IPv4 有类网络设计

IPv4（Internet Protocol Version 4）

最初设计互联网络时，为了便于寻址以及层次化构造网络，每个IP地址包括两个标识码（ID），即网络ID和主机ID。同一个物理网络上的所有主机都使用同一个网络ID，网络上的一个主机（包括网络上工作站，服务器等）有一个主机ID与其对应。

IP 地址被描述为由地址中的两组位组成：最高有效位是网络前缀，它标识整个网络或子网，最低有效位构成主机标识符，它指定主机的特定接口在那个网络上。该划分用作IP网络之间的流量路由和地址分配策略的基础。

Internet委员会定义了5种IP地址类型以适合不同容量的网络，即A类~E类。其中A、B、C这三类由InternetNIC在全球范围内统一分配，D、E类为特殊地址，且不分网络地址和主机地址。

类别|最大网络数|IP地址范围|单个网段最大主机数|私有IP地址范围
---|---|---|---|---
A|126($2^7-2$)|1.0.0.1-127.255.255.254|16777214($2^{24}-2$)|10.0.0.0-10.255.255.255
B|16384($2^{14}$)|128.0.0.1-191.255.255.254|65534($2^{16}-2$)|172.16.0.0-172.31.255.255
C|2097152($2^{21}$)|192.0.0.1-223.255.255.254|254($2^8-2$)|192.168.0.0-192.168.255.255

##### A类IP地址

指在IP地址的四段号码中，第一段号码为网络号码，剩下的三段号码为本地计算机的号码，网络地址二进制的最高位必须是“0”。

网络的标识长度为8位，主机标识的长度为24位，A类网络有126个，每个网络可以容纳主机数达16777214（1600多万）台。

地址范围1.0.0.1到127.255.255.254（二进制表示为：00000001 00000000 00000000 00000001 - 01111111 11111111 11111111 11111110）。最后一个是广播地址。

##### B类IP地址

指在IP地址的四段号码中，前两段号码为网络号码，网络地址二进制的最高位必须是“10”。

网络的标识长度为16位，主机标识的长度为16位，B类网络有16384个，每个网络所能容纳的计算机数为65534（6万多）台。

地址范围128.0.0.1-191.255.255.254（二进制表示为：10000000 00000000 00000000 00000001----10111111 11111111 11111111 11111110）。 最后一个是广播地址。

##### C类IP地址

指在IP地址的四段号码中，前三段号码为网络号码，剩下的一段号码为本地计算机的号码，网络地址二进制的最高位必须是“110”。

网络的标识长度为24位，主机标识的长度为8位，C类网络有2097152（209万多）个网络。每个网络最多只能包含254台计算机。

地址范围192.0.0.1-223.255.255.254（二进制表示为: 11000000 00000000 00000000 00000001 - 11011111 11111111 11111111 11111110）。

##### D类IP地址

在历史上被叫做多播地址(multicast address)，即组播地址。在以太网中，多播地址命名了一组应该在这个网络中应用接收到一个分组的站点。多播地址二进制的最高位必须是“1110”，范围从224.0.0.0到239.255.255.255。

##### E类IP地址

二进制的最高位必须是“1111”，范围从240.0.0.0到255.255.255.255。用于实验，为将来使用保留。

##### 特殊的网址

- 每一个字节都为0的地址（“0.0.0.0”）对应于当前主机；
- 每一个字节都为1的地址（“255.255.255.255”）是当前子网的广播地址；
- 专用IP地址，私有，不能访问公网
	+ 10.0.0.0--10.255.255.255（一个A类地址）
	+ 172.16.0.0--172.31.255.255（16个B类地址）
	+ 192.168.0.0--192.168.255.255（256个C类地址）
- 保留地址
	+ 主机部分全为0的IP地址保留用于网络地址
	+ 主机部分全为1的IP地址保留为广播地址
	+ 224--255部分保留作为组播和实验目的。
	+ IP地址分配时不能使用最末位为0和255的地址，因为这是广播地址，普通计算机上不能使用，但可用于网关和路由器上。
	+ 127.X.X.X是保留地址，用做循环测试用的。127.0.0.1也是本机地址，等效于localhost或本机IP。
	+ 169.254.X.X是保留地址。如果你的IP地址是自动获取IP地址，而你在网络上又没有找到可用的DHCP服务器。就会得到其中一个IP。

#### IPv6

IPv6（Internet Protocol Version 6）

IPv4地址组合的数量是有限的。2011年，全球互联网编号分配机构（IANA）分发了IPv4地址空间的最后一块。2015年，IANA正式宣布美国已用完IPv4地址。

但直到今天，IPv4地址仍然承载着最多（超过90％）的互联网流量。到目前为止，即使目前存在IPv4地址耗尽的问题，也有一些方法可以继续使用IPv4地址。例如，当仅需要一个唯一的IP地址来代表一组设备时，网络地址转换（NAT）是一种方法。除此之外，IP地址可以重复使用。当然，我们已经有了彻底耗尽的解决方案-IPv6地址。IPv6地址并不是一种全新的技术。它是Internet协议的最新版本，但它是在1998年开发的，旨在替换IPv4地址。IPv6也存在数量限制。不过可用的IP数量远大于IPv4。可能有一天也可能出现不够的情况。但就目前而言，这些地址将可以供我们使用很长一段时间。

注意IPv4和IPv6无法相互通信。大多数网站或应用程序仅支持IPv4类型的IP地址。想象一下突然更改每个设备的IP地址。用户将无法访问大多数网站或应用程序，那样我们在互联网上将陷入一片混乱。从旧的IP类型转换为新的IP类型的过程应分步完成。例如，这两个协议能够并行运行。此功能称为双重堆栈。它允许用户同时访问IPv4和IPv6内容。

##### 地址表示

IPv6地址使用以冒号分隔的十六进制数字。它分为八个16位块，构成一个128位地址方案。

128位地址表示比较长，看起来和写起来都不方便，零压缩法可以简化IPv6地址的缩写，具体压缩规则为：
- 每组中的前导“0”都可以省略。
- 地址中包含的连续两个或多个均为0的组，可以用双冒号“::”来代替。

##### 地址分类

IPv6的地址分为单播地址、组播地址和任播地址3类：
- 单播地址：标识一个接口，目的为单播地址的报文会被送到被标识的接口。类似于IPv4的“公有”IP地址。
- 组播地址：标识多个接口，目的为组播地址的报文会被送到被标识的所有接口。
- 任播地址：标识多个接口，目的为任播地址的报文会被送到最近的一个被标识接口，最近节点是由路由协议来定义的。

其中IPv6单播地址又分为：全球单播地址（可聚合全球单播地址GUA）、本地链路地址（LLA）、本地站点地址（本地站点地址现在已被唯一本地地址ULA所取代）、环回地址、未指定地址和IPv4兼容地址。

IPv6环回地址类似于IPv4地址127.0.0.1，其作用在于测试本地设备的TCP/IP协议簇是否被正确安装，而通过该地址发出的数据是不会经过网络传输。

IPv6中没有为任播规定单独的地址空间，任播地址和单播地址使用相同的地址空间，也包含可聚合全球单播地址、本地链路地址和本地站点地址。实际上，没有明确的概念能区分单播地址与任意播地址。


##### 国际分配

IPv6全球单播地址为`2000::/3`，即`2000:: - 3fff:ffff`。各区域分配如下：
1) 2000::/8 主要是IPv6互联网前期分配，在全球各地均有分配使用
2) 2400::/8 主要由APNIC管理（亚太互联网络信息中心）
3) 2600::/8 主要由ARIN管理（美洲互联网号码注册管机构）
4) 2800::/8 主要由LACNIC管理（拉丁美洲和加勒比地区互联网地址注册管理机构）
5) 2a00::/8 主要由RIPE管理（欧洲互联网络信息中心）
6) 2c00::/8 主要由AfriNIC管理（非洲互联网络信息中心）


IANA指定的注册机构则从地址空间2001:/16分配/23前缀，具体如下：
1) 2001:0200::/23 - 2001:0C00::/23 分配给亚太地区(APNIC)
2) 2001:0400::/23 分配给美国(ARIN)
3) 2001:0600::/23 - 2001:0800::/23 分配给欧洲和中东(RIPE NCO这些注册机构再从IANA得到的地址空间分配/32前缀给IPv6 ISP，IPv6 ISP再从32前缀中分配/48前缀给每个客户。/48 前缀的地址空间还可以进一步分为/64前缀的子网。这样每个客户最大可以有65535个子网。

##### 国内分配

中国互联网络中心（CNNIC）是中国大陆地区唯一的国家级互联网注册机构（NIR），是负责向本地区内的网络服务提供商和企事业单位分配IP地址、AS号码资源的权威、中立机构。用户可登陆中国互联网络中心的官方网站详细了解IP地址管理机申请办法。

赛尔网络是国内最大的IPv6网络CERNET（China Education and Research Network，中国教育和科研计算机网）的运营者，主要服务对象为教育行业（例如高校等），其拥有的IPv6地址资源也主要分给拥有赛尔网络会员资格的教育行业客户。

| 网段 | 运营商 | 掩码位 | IP数量(/32) |
|:-:|:-:|:-:|:-:|
| 240e::/18 | 中国电信(201812增加后3段) | 18 | 16384 |
| 2408:8000::/20 | 中国联通(201205) | 20 | 4096 |
| 2409:8000::/20 | 中国移动(201108) | 20 | 4096 |
| 240a:c000::/20 | 中国石油化工集团有限公司(201808) | 20 | 4096 |
| 240c:c000::/20 | 中国教育网(201901) | 20 | 4096 |
| 240a:4000::/21 | 中国广播电视网络有限公司(201712) | 21 | 2048 |
| 240a:8000::/21 | 中国铁通(移动)(201301) | 21 | 2048 |
| 240b:8000::/21 | 中国经济信息网(201308)/国家政务网内网(国家信息中心) | 21 | 2048 |
| 240c:8000::/21 | 中国石油天然气集团公司(201409) | 21 | 2048 |
| 240d:4000::/21 | 赛尔新技术(北京)有限公司(201902) | 21 | 2048 |
| 2408:4000::/22 | 阿里云计算有限公司(201512) | 22 | 1024 |
| 240c:4000::/22 | 北京百度网讯科技有限公司(201811) | 22 | 1024 |
| 240d:8000::/24 | 交通运输部公路科学研究院(201502) | 24 | 256 |
| 240f:4000::/24 | 深圳市腾讯计算机系统有限公司(201907) | 24 | 256 |
| 240f:8000::/24 | 亚马逊通技术服务(北京)有限公司(201504) | 24 | 256 |
| 240f:c000::/24 | 北京京东叁佰陆拾度电子商务有限公司(20190917) | 24 | 256 |
| 2400:dd00::/28 | 科技网(CSTNET,201105) | 28 | 16 |
| 240c::/28 | 北京天地互连信息技术有限公司(200807) | 28 | 16 |
| 2001:4510::/29 | 长城(200601) | 29 | 8 |
| 2400:a980::/29 | 赛尔新技术\(北京\) | 29 | 8 |
| 2406:cf00::/30 | 北京天地祥云科技有限公司 | 30 | 4 |
| 2001:250::/31 | 教育网（高校） | 31 | 2 |
| 2001:da8::/31 | 教育网（高校） | 31 | 2 |
| 2403:800::/31 | 中国南方电网有限责任公司(200808) | 31 | 2 |
| 2408:6000::/24 | 中电飞华通信股份有限公司20200716 | 24 | 256 |
| 2409:2000::/21 | 华为软件技术20200721 | 21 | 256 |
| 2409:6000::/20 | 浙江吉利控股集团有限公司20201022 | 20 | 4096 |
| 240a:2000::/24 | 北京光环新网科技股份有限公司20201103 | 24 | 256 |
| 240a:6000::/24 | 水利部信息中心-20210114 | 24 | 256 |
| 240a:a000::/20 | 教育网-20210401 | 20 | 4096 |
| 240b:4000::/22 | 阿里云境外(20181015) | 22 | 1024 |
| 240d:c000::/24 | 腾讯云境外(20190513) | 24 | 256 |


运营商AS编码

| AS码号 | 运营商 | 主要IP段 |
|:-:|:-:|:-:|
| AS23910 | 教育网 | 2001:250::/32 2001:da8::/32 240c:c000::/20 |
| AS4134 | 电信 | 240e::/18 |
| AS9808 | 移动 | 2409:8000::/20 |
| AS137726 | 石油化工 | 240a:c000::/20 |
| AS133111 | 赛尔新技术 | 240d:4000::/21 |
| AS37963 | 阿里 | 2400:3200::/32 2408:4000::/22 |
| AS38365 | 百度 | 2400:da00::/32 240c:4000::/22 |
| AS4837 | 联通 | 2408:8000::/20 |


| 掩码位 | 数量（个） | 本段IP数（/32） | IP数（/32） |
|:-:|:-:|:-:|:-:|
| 18 | 1 | 16384 | 16384\.00 |
| 20 | 4 | 4096 | 16384\.00 |
| 21 | 5 | 2048 | 10240\.00 |
| 22 | 2 | 1024 | 2048\.00 |
| 24 | 3 | 256 | 768\.00 |
| 28 | 2 | 16 | 32\.00 |
| 29 | 4 | 8 | 32\.00 |
| 30 | 1 | 4 | 4\.00 |
| 31 | 3 | 2 | 6\.00 |
| 32 | 1663 | 1 | 1663\.00 |
| 33 | 8 | 0\.5 | 4\.00 |
| 34 | 7 | 0\.25 | 1\.75 |
| 35 | 7 | 0\.125 | 0\.88 |
| 36 | 7 | 0\.0625 | 0\.44 |
| 37 | 5 | 0\.03125 | 0\.16 |
| 38 | 8 | 0\.015625 | 0\.13 |
|||总计：| 47568\.34 |


教育网高校分配（部分）

| 地区 | 省份 | 开始IP段 | 结束IP段 |
|:-:|:-:|:-:|:-:|
| 中国北京市 | 北京市 | 2001:250:0200:: | 2001:250:03ff:ffff:: |
| 中国天津市 | 天津市 | 2001:250:0400:: | 2001:250:05ff:ffff:: |
| 中国河北省 | 河北省 | 2001:250:0800:: | 2001:250:09ff:ffff:: |
| 中国山西省 | 山西省 | 2001:250:0c00:: | 2001:250:0cff:ffff:: |
| 中国内蒙古 | 内蒙古 | 2001:250:0e00:: | 2001:250:0cff:ffff:: |
| 中国陕西省 | 陕西省 | 2001:250:1000:: | 2001:250:1000:ffff:: |
| 中国甘肃省 | 甘肃省 | 2001:250:1400:: | 2001:250:14ff:ffff:: |
| 中国新疆区 | 新疆区 | 2001:250:1800:: | 2001:250:18ff:ffff:: |
| 中国宁夏区 | 宁夏区 | 2001:250:1c00:: | 2001:250:1cff:ffff:: |
| 中国青海省 | 青海省 | 2001:250:1e00:: | 2001:250:1eff:ffff:: |
| 中国四川省 | 四川省 | 2001:250:2000::/40 | 2001:250:20ff:ffff:: |
| 中国重庆市 | 重庆市 | 2001:250:2400::/40 | 2001:250:24ff:ffff:: |
| 中国云南省 | 云南省 | 2001:250:2800::/40 | 2001:250:28ff:ffff:: |
| 中国贵州省 | 贵州省 | 2001:250:2c00::/40 | 2001:250:2cff:ffff:: |
| 中国西藏区 | 西藏区 | 2001:250:2e00::/40 | 2001:250:2eff:ffff:: |
| 中国广东省 | 广东省 | 2001:250:3000::/40 | 2001:250:30ff:ffff:: |

中国电信

| 所属IP段 | 地区 | 运营商 | 开始IP | 结束IP |
|:-:|:-:|:-:|:-:|:-:|
| 240e::/26 | 全国 | 电信骨干网、城域网 | 240e:: | 240e:3f:ffff:ffff:: |
| 240e:40:/26 | 全国 | 电信业务平台 | 240e:40:: | 240e:7f:ffff:ffff:: |
| 240e:80:/25 | 全国 | 综合网络 | 240e:80:: | 240e:ff:ffff:ffff:: |
| 240e:100::/24 | 全国 | 电信城域网 | 240e:100:: | 240e:1ff:ffff:ffff:: |
| 240e:200::/24 | 全国 | 电信业务平台 | 240e:100:: | 240e:1ff:ffff:ffff:: |
| 240e:300::/24 | 全国 | 电信公众宽带 | 240e:300:: | 240e:3ff:ffff:ffff:: |
| 240e:400::/24 | 全国 | 电信LTE网络 | 240e:400:: | 240e:4ff:ffff:ffff:: |
| 240e:500::/24 | 全国 | 电信IP专网 | 240e:500:: | 240e:5ff:ffff:ffff:: |
| 240e:600::/24 | 全国 | 电信政企专线 | 240e:600:: | 240e:6ff:ffff:ffff:: |
| 240e:700::/24 | 全国 | 电信政企专线 | 240e:700:: | 240e:7ff:ffff:ffff:: |
| 240e:800::/24 | 全国 | 电信物联网络 | 240e:800:: | 240e:8ff:ffff:ffff:: |
| 240e:900::/24 | 全国 | 电信IDC | 240e:900:: | 240e:9ff:ffff:ffff:: |
| 240e:a00::/24 | 全国 | 电信网吧网络 | 240e:a00:: | 240e:aff:ffff:ffff:: |
| 240e:b00::/24 | 全国 | 电信公众宽带 | 240e:b00:: | 240e:bff:ffff:ffff:: |
| 240e:c00::/22 | 全国 | 未使用 | 240e:c00:: | 240e:fff:ffff:ffff:: |
| 240e:1000::/20 | 全国 | 未使用 | 240e:1000:: | 240e:1fff:ffff:ffff:: |
| 240e:2000::/20 | 全国 | 未使用 | 240e:2000:: | 240e:2fff:ffff:ffff:: |
| 240e:3000::/20 | 全国 | 未使用 | 240e:3000:: | 240e:3fff:ffff:ffff:: |

中国联通

| 所属IP段 | 地区 | 运营商 | 开始IP | 结束IP |
|:-:|:-:|:-:|:-:|:-:|
| 2408:8000::/24 | 全国 | 联通城域网 | 2408:8000:1000:: | 2408:8000:1fff:ffff:: |
| 2408:8100::/24 | 全国 | 联通骨干网 | 2408:8100:: | 2408:8100:ffff:ffff:: |
| 2408:8200::/24 | 全国 | 联通公众宽带 | 2408:8200:: | 2408:82ff:ffff:ffff:: |
| 2408:8300::/24 | 全国 | 联通公众宽带 | 2408:8300:: | 2408:83ff:ffff:ffff:: |
| 2408:8400::/24 | 全国 | 联通LTE | 2408:8400:: | 2408:84ff:ffff:ffff:: |
| 2408:8500::/24 | 全国 | 联通IP专网 | 2408:8500:: | 2408:85ff:ffff:ffff:: |
| 2408:8600::/24 | 全国 | 联通政企专线 | 2408:8600:: | 2408:86ff:ffff:ffff:: |
| 2408:8700::/24 | 全国 | 联通IDC | 2408:8700:: | 2408:87ff:ffff:ffff:: |
| 2408:8800::/24 | 全国 | 联通物联网络 | 2408:8800:: | 2408:88ff:ffff:ffff:: |
| 2408:8900::/24 | 全国 | 联通物联网络 | 2408:8900:: | 2408:89ff:ffff:ffff:: |

中国移动

| 所属IP段 | 地区 | 运营商 | 开始IP | 结束IP |
|:-:|:-:|:-:|:-:|:-:|
| 2409:8000::/24 | 全国 | 中国移动城域网 | 2409:8000:: | 2409:8001:ffff:ffff:: |
| 2409:8100::/24 | 全国 | 移动IP专网 | 2409:8100:: | 2409:86ff:ffff:ffff:: |
| 2409:8700::/24 | 全国 | 移动政企专线 | 2409:8700:: | 2409:87ff:ffff:ffff:: |
| 2409:8800::/24 | 全国 | 移动IP专网 | 2409:8800:: | 2409:88ff:ffff:ffff:: |
| 2409:8900::/24 | 全国 | 移动LTE网络 | 2409:8900:: | 2409:89ff:ffff:ffff:: |
| 2409:8a00::/24 | 全国 | 移动公众宽带 | 2409:8a00:: | 2409:8aff:ffff:ffff:: |
| 2409:8b00::/24 | 全国 | 移动WLAN热点 | 2409:8b00:: | 2409:8bff:ffff:ffff:: |
| 2409:8c00::/24 | 全国 | 移动IDC | 2409:8c00:: | 2409:8cff:ffff:ffff:: |
| 2409:8d00::/24 | 全国 | 移动物联网络 | 2409:8d00:: | 2409:8dff:ffff:ffff:: |
| 2409:8e00::/24 | 全国 | 移动物联网络 | 2409:8e00:: | 2409:8eff:ffff:ffff:: |

云厂商

| 所属IP段 | 云厂商 | 地区 | 开始IP | 结束IP |
|:-:|:-:|:-:|:-:|:-:|
| 2400:3200::/32 | 阿里云 | 杭州 | 2400:3200:: | 2400:3200:ffff:ffff:: |
| 2400:b200::/32 | 阿里云 | 蚂蚁金服 | 2400:b200:: | 2400:b200:ffff:ffff:: |
| 2408:4000::/32 | 阿里云 | 北京 | 2408:4000:: | 2408:4000:ffff:ffff:: |
| 2408:4001::/32 | 阿里云 | 河北张家口 | 2408:4001:: | 2408:4001:ffff:ffff:: |
| 2408:4002::/32 | 阿里云 | 上海 | 2408:4002:: | 2408:4002:ffff:ffff:: |
| 2408:4003::/32 | 阿里云 | 深圳 | 2408:4003:: | 2408:4003:ffff:ffff:: |
| 2408:4004::/32 | 阿里云 | 呼和浩特 | 2408:4004:: | 2408:4004:ffff:ffff:: |
| 2408:4005::/32 | 阿里云 | 杭州 | 2408:4005:: | 2408:4005:ffff:ffff:: |
| 2408:4006::/32 | 阿里云 | 成都 | 2408:4006:: | 2408:4006:ffff:ffff:: |
| 2408:4007::/32 | 阿里云 | 广州 | 2408:4007:: | 2408:4007:ffff:ffff:: |
| 2408:4008::/32 | 阿里云 | 河源 | 2408:4008:: | 2408:4008:ffff:ffff:: |
| 2408:4009::/32 | 阿里云 | 青岛* | 2408:4009:: | 2408:4009:ffff:ffff:: |
| 2408:400a::/32 | 阿里云 | 北京 | 2408:400a:: | 2408:400a:ffff:ffff:: |
| 2408:400b::/32 | 阿里云 | 乌兰察布 | 2408:400b:: | 2408:400b:ffff:ffff:: |
| 240b:4000::/32 | 阿里云 | 新加坡 | 240b:4000:: | 240b:4000:ffff:ffff:: |
| 240b:4001::/32 | 阿里云 | 香港 | 240b:4001:: | 240b:4001:ffff:ffff:: |
| 240b:4002::/32 | 阿里云 | 美国弗吉尼亚州 | 240b:4002:: | 240b:4002:ffff:ffff:: |
| 240b:4005::/32 | 阿里云 | 德国法兰克福 | 240b:4005:: | 240b:4005:ffff:ffff:: |
| 240c:4081::/32 | 百度云 | 北京 | 240c:4081:: | 240c:4081:ffff:ffff:: |
| 240c:4082::/32 | 百度云 | 保定 | 240c:4082:: | 240c:4082:ffff:ffff:: |
| 240c:4084::/32 | 百度云 | 苏州 | 240c:4084:: | 240c:4084:ffff:ffff:: |
| 240c:4085::/32 | 百度云 | 广州 | 240c:4085:: | 240c:4085:ffff:ffff:: |
| 240c:4088::/32 | 百度云 | 武汉 | 240c:4088:: | 240c:4088:ffff:ffff:: |
| 240c:4089::/32 | 百度云 | 上海 | 240c:4089:: | 240c:4089:ffff:ffff:: |
| 2402:2b40::/32 | 百度云 | 香港/新加坡 | 2402:2b40:: | 2402:2b40:ffff:ffff:: |
| 2402:4e00::/32 | 腾讯云 | 合集 | 2402:4e00:: | 2402:4e00:ffff:ffff:: |
| 2402:4e00::/47 | 腾讯云 | 深圳 | 2402:4e00:: | 2402:4e00:1f:ffff:: |
| 2402:4e00:20::/47 | 腾讯云 | 北京 | 2402:4e00:20:: | 2402:4e00:2f:ffff:: |
| 2402:4e00:30::/47 | 腾讯云 | 上海 | 2402:4e00:30:: | 2402:4e00:3f:ffff:: |
| 2402:4e00:40::/47 | 腾讯云 | 广州 | 2402:4e00:40:: | 2402:4e00:4f:ffff:: |
| 2402:4e00:90::/47 | 腾讯云 | 成都 | 2402:4e00:90:: | 2402:4e00:9f:ffff:: |
| 2402:4e00:a0::/47 | 腾讯云 | 南京 | 2402:4e00:a0:: | 2402:4e00:af:ffff:: |
| 2402:4e00:c0::/47 | 腾讯云 | 天津 | 2402:4e00:c0:: | 2402:4e00:cf:ffff:: |
| 2402:4e00:1000::/41 | 腾讯云 | 广州 | 2402:4e00:1000:: | 2402:4e00:11ff:ffff:: |
| 2402:4e00:1200::/41 | 腾讯云 | 北京 | 2402:4e00:1200:: | 2402:4e00:13ff:ffff:: |
| 2402:4e00:1400::/41 | 腾讯云 | 上海 | 2402:4e00:1400:: | 2402:4e00:15ff:ffff:: |
| 2402:4e00:1700::/40 | 腾讯云 | 成都 | 2402:4e00:1700:: | 2402:4e00:17ff:ffff:: |
| 2402:4e00:1800::/40 | 腾讯云 | 南京 | 2402:4e00:1800:: | 2402:4e00:18ff:ffff:: |
| 2402:4e00:1900::/40 | 腾讯云 | 天津 | 2402:4e00:1900:: | 2402:4e00:19ff:ffff:: |
| 240d:c000::/36 | 腾讯云 | 新加坡 | 240d:c000:0000:: | 240d:c000:0fff:ffff:: |
| 240d:c000:1000::/36 | 腾讯云 | 新加坡 | 240d:c000:1000:: | 240d:c000:1fff:ffff:: |
| 240d:c000:2000::/36 | 腾讯云 | 香港 | 240d:c000:2000:: | 240d:c000:2fff:ffff:: |
| 240d:c000:3000::/36 | 腾讯云 | 美国弗吉尼亚州 | 240d:c000:3000:: | 240d:c000:3fff:ffff:: |
| 240d:c010::/36 | 腾讯云 | 印度 | 240d:c010:: | 240d:c010:fff:ffff:: |
| 240d:c040::/36 | 腾讯云 | 香港 | 240d:c040:: | 240d:c040:fff:ffff:: |
| 2407:c080::/32 | 华为 | 合集 | 2407:c080:: | 2407:c080:ffff:ffff:: |
| 2407:c080:0000::/35 | 华为 | 广州 | 2407:c080:: | 2407:c080:7ff:ffff:: |
| 2407:c080:0800::/35 | 华为 | 上海 | 2407:c080:800:: | 2407:c080:fff:ffff:: |
| 2407:c080:1000::/35 | 华为 | 北京 | 2407:c080:1000:: | 2407:c080:17ff:ffff:: |
| 2407:c080:1800::/35 | 华为 | 贵阳 | 2407:c080:1800:: | 2407:c080:1fff:ffff:: |
| 2405:f080::/32 | 华为 | 境外 | 2405:f080:: | 2405:f080:ffff:ffff:: |
| 2405:f080:810::/64 | 华为 | 泰国曼谷 | 2405:f080:: | 2405:f080:ffff:ffff:: |
| 2405:f080:1f0::/64 | 华为 | 新加坡 | 2405:f080:: | 2405:f080:ffff:ffff:: |
| 2405:f080:410::/64 | 华为 | 香港 | 2405:f080:: | 2405:f080:ffff:ffff:: |
| 2402:e7c0::/32 | 青云/优帆 | 北京、深圳、上海 | 2402:e7c0:: | 2402:e7c0:ffff:ffff:: |
| 2401:1d40::/32 | 金山云 | 北京、上海、广州 | 2401:1d40:: | 2401:1d40:ffff:ffff:: |
| 2401:3480::/32 | 优刻得 | 北京、上海、广州 | 2401:3480:: | 2401:3480:ffff:ffff:: |
| 2402:db40::/32 | 京东云 | 全国 | 2402:db40:: | 2402:db40:ffff:ffff:: |
| 2404:de80::/32 | 硅云* | 香港 | 2404:de80:: | 2404:de80:ffff:ffff:: |
| 2400:5280::/32 | 美团云 | 北京 | 2400:5280:: | 2400:5280:ffff:ffff:: |
| 2400:89c0::/32 | 新浪 | 北京 | 2400:89c0:: | 2400:89c0:ffff:ffff:: |

>带“*”为暂不使用

以运营商宽带IP为例，每个省分到的数量也不同，移动和联通顺序大致相似，电信不同

| 省份编号 | 省份名称 | 移动宽带IP段 | 联通宽带IP段 | 电信宽带IP段 | 广电电视* |
|:----:|:----:|:----:|:----:|:----:|:----:|
| 11 | 中国北京市 | 2409:8a00::/31 | 2408:8206::/31*3 | 240e:304::/30 | 240a:4100::/31 |
| 12 | 中国天津市 | 2409:8a02::/31 | 2408:8210::/30 | 240e:328::/30 | 240a:4106::/31 |
| 13 | 中国河北省 | 2409:8a04::/30*2 | 2408:821a::/31*3 | 240e:340::/30 | 240a:410a::/31 |
| 14 | 中国山西省 | 2409:8a0c::/30 | 2408:8226::/31*2 | 240e:324::/30 | 240a:4110::/31 |
| 15 | 中国内蒙古区 | 2409:8a10::/30 | 2408:822a::/31*2 | 240e:318::/30 | 240a:4112::/31 |
| 21 | 中国辽宁省 | 2409:8a14::/30 | 2408:822e::/31*3 | 240e:30c::/30 | 240a:4114::/31 |
| 22 | 中国吉林省 | 2409:8a18::/30 | 2408:8234::/30 | 240e:310::/30 | 240a:4118::/31 |
| 23 | 中国黑龙江省 | 2409:8a1a::/31*2 | 2408:8238::/30 | 240e:308::/30 | 240a:411a::/31 |
| 31 | 中国上海市 | 2409:8a1e::/31 | 2408:820c::/30 | 240e:380::/28 | 240a:411e::/31 |
| 32 | 中国江苏省 | 2409:8a20::/29 | 2408:823c::/30 | 240e:3a0::/28 | 240a:4124::/31 |
| 33 | 中国浙江省 | 2409:8a28::/29 | 2408:8240::/30 | 240e:390::/29 | 240a:4128::/31 |
| 34 | 中国安徽省 | 2409:8a30::/30 | 2408:8244::/30 | 240e:366::/29 | 240a:412c::/31 |
| 35 | 中国福建省 | 2409:8a34::/30 | 2408:8248::/30 | 240e:378::/29 | 240a:4130::/31 |
| 36 | 中国江西省 | 2409:8a38::/30 | 2408:824c::/31 | 240e:370::/29 | 240a:4134::/31 |
| 37 | 中国山东省 | 2409:8a3c::/30 | 2408:8214::/31*3 | 240e:344::/30 | 240a:4138::/31 |
| 41 | 中国河南省 | 2409:8a44::/29 | 2408:8220::/30 | 240e:33c::/30 | 240a:413e::/31 |
| 42 | 中国湖北省 | 2409:8a4c::/30 | 2408:824e::/31*2 | 240e:36f::/28 | 240a:4144::/31 |
| 43 | 中国湖南省 | 2409:8a50::/30 | 2408:8252::/31*2 | 240e:380::/28 | 240a:4148::/31 |
| 44 | 中国广东省 | 2409:8a54::/30*2 | 2408:8256::/31*3 | 240e:3b0::/28 | 240a:414c::/31 |
| 45 | 中国广西区 | 2409:8a5c::/31 | 2408:825c::/30 | 240e:350::/30 | 240a:4152::/31 |
| 46 | 中国海南省 | 2409:8a5e::/31 | 2408:8260::/31 | 240e:314::/30 | 240a:4156::/31 |
| 50 | 中国重庆市 | 2409:8a60::/31 | 2408:8262::/30 | 240e:330::/30 | 240a:4158::/31 |
| 51 | 中国四川省 | 2409:8a62::/31*3 | 2408:8266::/30 | 240e:398::/30 | 240a:415c::/31 |
| 52 | 中国贵州省 | 2409:8a6a::/31 | 2408:826a::/31 | 240e:338::/30 | 240a:4162::/31 |
| 53 | 中国云南省 | 2409:8a6c::/31 | 2408:826c::/31 | 240e:34c::/30 | 240a:4164::/31 |
| 54 | 中国西藏区 | 2409:8a7e::/31 | 2408:826e::/31 | 240e:32c::/30 | 240a:4168::/31 |
| 61 | 中国陕西省 | 2409:8a70::/30 | 2408:8270::/30 | 240e:358::/30 | 240a:416a::/31 |
| 62 | 中国甘肃省 | 2409:8a74::/30 | 2408:8274::/31 | 240e:334::/30 | 240a:416e::/31 |
| 63 | 中国青海省 | 2409:8a78::/31 | 2408:8276::/31 | 240e:320::/30 | 240a:4170::/31 |
| 64 | 中国宁夏区 | 2409:8a7a::/31 | 2408:8278::/31 | 240e:31c::/30 | 240a:4172::/31 |
| 65 | 中国新疆区 | 2409:8a7c::/30 | 2408:827a::/31 | 240e:348::/30 | 240a:4174::/31 |

>广电电视：暂未开放使用且不开放外网，仅供参考

地方IPv6分配规则。以贵州省为例，三大运营商的公众宽带和LTE网络均为该规则（海南省有差异）

| 序号 | 区县 | 移动宽带 | 移动LTE | 联通宽带 | 联通LTE | 电信宽带 | 电信LTE |
|----|----------|---------------------|---------------------|---------------------|---------------------|--------------------|--------------------|
| 1 | 贵阳市南明区 | 2409:8a6a::/39 | 2409:896a::/39 | 2408:826a::/39 | 2408:846a::/39 | 240e:338::/39 | 240e:438::/39 |
| 2 | 贵阳市云岩区 | 2409:8a6a:200::/39 | 2409:896a:200::/39 | 2408:826a:200::/39 | 2408:846a:200::/39 | 240e:338:200::/39 | 240e:438:200::/39 |
| 3 | 贵阳市花溪区 | 2409:8a6a:400::/39 | 2409:896a:400::/39 | 2408:826a:400::/39 | 2408:846a:400::/39 | 240e:338:400::/39 | 240e:438:400::/39 |
| 4 | 贵阳市乌当区 | 2409:8a6a:600::/39 | 2409:896a:600::/39 | 2408:826a:600::/39 | 2408:846a:600::/39 | 240e:338:600::/39 | 240e:438:600::/39 |
| 5 | 贵阳市白云区 | 2409:8a6a:800::/39 | 2409:896a:800::/39 | 2408:826a:800::/39 | 2408:846a:800::/39 | 240e:338:800::/39 | 240e:438:800::/39 |
| 6 | 贵阳市观山湖区 | 2409:8a6a:a00::/39 | 2409:896a:a00::/39 | 2408:826a:a00::/39 | 2408:846a:a00::/39 | 240e:338:a00::/39 | 240e:438:a00::/39 |
| 7 | 贵阳市清镇市 | 2409:8a6a:c00::/39 | 2409:896a:c00::/39 | 2408:826a:c00::/39 | 2408:846a:c00::/39 | 240e:338:c00::/39 | 240e:438:c00::/39 |
| 8 | 贵阳市开阳县 | 2409:8a6a:e00::/39 | 2409:896a:e00::/39 | 2408:826a:e00::/39 | 2408:846a:e00::/39 | 240e:338:e00::/39 | 240e:438:e00::/39 |
| 9 | 贵阳市息烽县 | 2409:8a6a:1000::/39 | 2409:896a:1000::/39 | 2408:826a:1000::/39 | 2408:846a:1000::/39 | 240e:338:1000::/39 | 240e:438:1000::/39 |
| 10 | 贵阳市修文县 | 2409:8a6a:1200::/39 | 2409:896a:1200::/39 | 2408:826a:1200::/39 | 2408:846a:1200::/39 | 240e:338:1200::/39 | 240e:438:1200::/39 |
| 11 | 六盘水市钟山区 | 2409:8a6a:1400::/39 | 2409:896a:1400::/39 | 2408:826a:1400::/39 | 2408:846a:1400::/39 | 240e:338:1400::/39 | 240e:438:1400::/39 |
| 12 | 六盘水市六枝特区 | 2409:8a6a:1600::/39 | 2409:896a:1600::/39 | 2408:826a:1600::/39 | 2408:846a:1600::/39 | 240e:338:1600::/39 | 240e:438:1600::/39 |
| 13 | 六盘水市水城县 | 2409:8a6a:1800::/39 | 2409:896a:1800::/39 | 2408:826a:1800::/39 | 2408:846a:1800::/39 | 240e:338:1800::/39 | 240e:438:1800::/39 |
| 14 | 六盘水市盘州市 | 2409:8a6a:1a00::/39 | 2409:896a:1a00::/39 | 2408:826a:1a00::/39 | 2408:846a:1a00::/39 | 240e:338:1a00::/39 | 240e:438:1a00::/39 |
| 15 | 遵义市红花岗区 | 2409:8a6a:1c00::/39 | 2409:896a:1c00::/39 | 2408:826a:1c00::/39 | 2408:846a:1c00::/39 | 240e:338:1c00::/39 | 240e:438:1c00::/39 |
| 16 | 遵义市汇川区 | 2409:8a6a:1e00::/39 | 2409:896a:1e00::/39 | 2408:826a:1e00::/39 | 2408:846a:1e00::/39 | 240e:338:1e00::/39 | 240e:438:1e00::/39 |
| 17 | 遵义市赤水市 | 2409:8a6a:2000::/39 | 2409:896a:2000::/39 | 2408:826a:2000::/39 | 2408:846a:2000::/39 | 240e:338:2000::/39 | 240e:438:2000::/39 |
| 18 | 遵义市仁怀市 | 2409:8a6a:2200::/39 | 2409:896a:2200::/39 | 2408:826a:2200::/39 | 2408:846a:2200::/39 | 240e:338:2200::/39 | 240e:438:2200::/39 |
| 19 | 遵义市播州区 | 2409:8a6a:2400::/39 | 2409:896a:2400::/39 | 2408:826a:2400::/39 | 2408:846a:2400::/39 | 240e:338:2400::/39 | 240e:438:2400::/39 |
| 20 | 遵义市桐梓县 | 2409:8a6a:2600::/39 | 2409:896a:2600::/39 | 2408:826a:2600::/39 | 2408:846a:2600::/39 | 240e:338:2600::/39 | 240e:438:2600::/39 |
| 21 | 遵义市绥阳县 | 2409:8a6a:2800::/39 | 2409:896a:2800::/39 | 2408:826a:2800::/39 | 2408:846a:2800::/39 | 240e:338:2800::/39 | 240e:438:2800::/39 |
| 22 | 遵义市正安县 | 2409:8a6a:2a00::/39 | 2409:896a:2a00::/39 | 2408:826a:2a00::/39 | 2408:846a:2a00::/39 | 240e:338:2a00::/39 | 240e:438:2a00::/39 |
| 23 | 遵义市道真县 | 2409:8a6a:2c00::/39 | 2409:896a:2c00::/39 | 2408:826a:2c00::/39 | 2408:846a:2c00::/39 | 240e:338:2c00::/39 | 240e:438:2c00::/39 |
| 24 | 遵义市务川县 | 2409:8a6a:2e00::/39 | 2409:896a:2e00::/39 | 2408:826a:2e00::/39 | 2408:846a:2e00::/39 | 240e:338:2e00::/39 | 240e:438:2e00::/39 |
| 25 | 遵义市凤冈县 | 2409:8a6a:3000::/39 | 2409:896a:3000::/39 | 2408:826a:3000::/39 | 2408:846a:3000::/39 | 240e:338:3000::/39 | 240e:438:3000::/39 |
| 26 | 遵义市湄潭县 | 2409:8a6a:3200::/39 | 2409:896a:3200::/39 | 2408:826a:3200::/39 | 2408:846a:3200::/39 | 240e:338:3200::/39 | 240e:438:3200::/39 |
| 27 | 遵义市余庆县 | 2409:8a6a:3400::/39 | 2409:896a:3400::/39 | 2408:826a:3400::/39 | 2408:846a:3400::/39 | 240e:338:3400::/39 | 240e:438:3400::/39 |
| 28 | 遵义市习水县 | 2409:8a6a:3600::/39 | 2409:896a:3600::/39 | 2408:826a:3600::/39 | 2408:846a:3600::/39 | 240e:338:3600::/39 | 240e:438:3600::/39 |
| 29 | 铜仁市碧江区 | 2409:8a6a:3800::/39 | 2409:896a:3800::/39 | 2408:826a:3800::/39 | 2408:846a:3800::/39 | 240e:338:3800::/39 | 240e:438:3800::/39 |
| 30 | 铜仁市万山区 | 2409:8a6a:3a00::/39 | 2409:896a:3a00::/39 | 2408:826a:3a00::/39 | 2408:846a:3a00::/39 | 240e:338:3a00::/39 | 240e:438:3a00::/39 |
| 31 | 铜仁市江口县 | 2409:8a6a:3c00::/39 | 2409:896a:3c00::/39 | 2408:826a:3c00::/39 | 2408:846a:3c00::/39 | 240e:338:3c00::/39 | 240e:438:3c00::/39 |
| 32 | 铜仁市玉屏县 | 2409:8a6a:3e00::/39 | 2409:896a:3e00::/39 | 2408:826a:3e00::/39 | 2408:846a:3e00::/39 | 240e:338:3e00::/39 | 240e:438:3e00::/39 |
| 33 | 铜仁市石阡县 | 2409:8a6a:4000::/39 | 2409:896a:4000::/39 | 2408:826a:4000::/39 | 2408:846a:4000::/39 | 240e:338:4000::/39 | 240e:438:4000::/39 |
| 34 | 铜仁市思南县 | 2409:8a6a:4200::/39 | 2409:896a:4200::/39 | 2408:826a:4200::/39 | 2408:846a:4200::/39 | 240e:338:4200::/39 | 240e:438:4200::/39 |
| 35 | 铜仁市印江县 | 2409:8a6a:4400::/39 | 2409:896a:4400::/39 | 2408:826a:4400::/39 | 2408:846a:4400::/39 | 240e:338:4400::/39 | 240e:438:4400::/39 |
| 36 | 铜仁市德江县 | 2409:8a6a:4600::/39 | 2409:896a:4600::/39 | 2408:826a:4600::/39 | 2408:846a:4600::/39 | 240e:338:4600::/39 | 240e:438:4600::/39 |
| 37 | 铜仁市沿河县 | 2409:8a6a:4800::/39 | 2409:896a:4800::/39 | 2408:826a:4800::/39 | 2408:846a:4800::/39 | 240e:338:4800::/39 | 240e:438:4800::/39 |
| 38 | 铜仁市松桃县 | 2409:8a6a:4a00::/39 | 2409:896a:4a00::/39 | 2408:826a:4a00::/39 | 2408:846a:4a00::/39 | 240e:338:4a00::/39 | 240e:438:4a00::/39 |
| 39 | 黔西南州兴义市 | 2409:8a6a:4c00::/39 | 2409:896a:4c00::/39 | 2408:826a:4c00::/39 | 2408:846a:4c00::/39 | 240e:338:4c00::/39 | 240e:438:4c00::/39 |
| 40 | 黔西南州兴仁市 | 2409:8a6a:4e00::/39 | 2409:896a:4e00::/39 | 2408:826a:4e00::/39 | 2408:846a:4e00::/39 | 240e:338:4e00::/39 | 240e:438:4e00::/39 |
| 41 | 黔西南州普安县 | 2409:8a6a:5000::/39 | 2409:896a:5000::/39 | 2408:826a:5000::/39 | 2408:846a:5000::/39 | 240e:338:5000::/39 | 240e:438:5000::/39 |
| 42 | 黔西南州晴隆县 | 2409:8a6a:5200::/39 | 2409:896a:5200::/39 | 2408:826a:5200::/39 | 2408:846a:5200::/39 | 240e:338:5200::/39 | 240e:438:5200::/39 |
| 43 | 黔西南州贞丰县 | 2409:8a6a:5400::/39 | 2409:896a:5400::/39 | 2408:826a:5400::/39 | 2408:846a:5400::/39 | 240e:338:5400::/39 | 240e:438:5400::/39 |
| 44 | 黔西南州望谟县 | 2409:8a6a:5600::/39 | 2409:896a:5600::/39 | 2408:826a:5600::/39 | 2408:846a:5600::/39 | 240e:338:5600::/39 | 240e:438:5600::/39 |
| 45 | 黔西南州册亨县 | 2409:8a6a:5800::/39 | 2409:896a:5800::/39 | 2408:826a:5800::/39 | 2408:846a:5800::/39 | 240e:338:5800::/39 | 240e:438:5800::/39 |
| 46 | 黔西南州安龙县 | 2409:8a6a:5a00::/39 | 2409:896a:5a00::/39 | 2408:826a:5a00::/39 | 2408:846a:5a00::/39 | 240e:338:5a00::/39 | 240e:438:5a00::/39 |
| 47 | 毕节市七星关区 | 2409:8a6a:5c00::/39 | 2409:896a:5c00::/39 | 2408:826a:5c00::/39 | 2408:846a:5c00::/39 | 240e:338:5c00::/39 | 240e:438:5c00::/39 |
| 48 | 毕节市大方县 | 2409:8a6a:5e00::/39 | 2409:896a:5e00::/39 | 2408:826a:5e00::/39 | 2408:846a:5e00::/39 | 240e:338:5e00::/39 | 240e:438:5e00::/39 |
| 49 | 毕节市黔西县 | 2409:8a6a:6000::/39 | 2409:896a:6000::/39 | 2408:826a:6000::/39 | 2408:846a:6000::/39 | 240e:338:6000::/39 | 240e:438:6000::/39 |
| 50 | 毕节市金沙县 | 2409:8a6a:6200::/39 | 2409:896a:6200::/39 | 2408:826a:6200::/39 | 2408:846a:6200::/39 | 240e:338:6200::/39 | 240e:438:6200::/39 |
| 51 | 毕节市织金县 | 2409:8a6a:6400::/39 | 2409:896a:6400::/39 | 2408:826a:6400::/39 | 2408:846a:6400::/39 | 240e:338:6400::/39 | 240e:438:6400::/39 |
| 52 | 毕节市纳雍县 | 2409:8a6a:6600::/39 | 2409:896a:6600::/39 | 2408:826a:6600::/39 | 2408:846a:6600::/39 | 240e:338:6600::/39 | 240e:438:6600::/39 |
| 53 | 毕节市威宁县 | 2409:8a6a:6800::/39 | 2409:896a:6800::/39 | 2408:826a:6800::/39 | 2408:846a:6800::/39 | 240e:338:6800::/39 | 240e:438:6800::/39 |
| 54 | 毕节市赫章县 | 2409:8a6a:6a00::/39 | 2409:896a:6a00::/39 | 2408:826a:6a00::/39 | 2408:846a:6a00::/39 | 240e:338:6a00::/39 | 240e:438:6a00::/39 |
| 55 | 安顺市西秀区 | 2409:8a6a:6c00::/39 | 2409:896a:6c00::/39 | 2408:826a:6c00::/39 | 2408:846a:6c00::/39 | 240e:338:6c00::/39 | 240e:438:6c00::/39 |
| 56 | 安顺市平坝区 | 2409:8a6a:6e00::/39 | 2409:896a:6e00::/39 | 2408:826a:6e00::/39 | 2408:846a:6e00::/39 | 240e:338:6e00::/39 | 240e:438:6e00::/39 |
| 57 | 安顺市普定县 | 2409:8a6a:7000::/39 | 2409:896a:7000::/39 | 2408:826a:7000::/39 | 2408:846a:7000::/39 | 240e:338:7000::/39 | 240e:438:7000::/39 |
| 58 | 安顺市镇宁县 | 2409:8a6a:7200::/39 | 2409:896a:7200::/39 | 2408:826a:7200::/39 | 2408:846a:7200::/39 | 240e:338:7200::/39 | 240e:438:7200::/39 |
| 59 | 安顺市关岭县 | 2409:8a6a:7400::/39 | 2409:896a:7400::/39 | 2408:826a:7400::/39 | 2408:846a:7400::/39 | 240e:338:7400::/39 | 240e:438:7400::/39 |
| 60 | 安顺市紫云县 | 2409:8a6a:7600::/39 | 2409:896a:7600::/39 | 2408:826a:7600::/39 | 2408:846a:7600::/39 | 240e:338:7600::/39 | 240e:438:7600::/39 |
| 61 | 黔东南州凯里市 | 2409:8a6a:7800::/39 | 2409:896a:7800::/39 | 2408:826a:7800::/39 | 2408:846a:7800::/39 | 240e:338:7800::/39 | 240e:438:7800::/39 |
| 62 | 黔东南州黄平县 | 2409:8a6a:7a00::/39 | 2409:896a:7a00::/39 | 2408:826a:7a00::/39 | 2408:846a:7a00::/39 | 240e:338:7a00::/39 | 240e:438:7a00::/39 |
| 63 | 黔东南州施秉县 | 2409:8a6a:7c00::/39 | 2409:896a:7c00::/39 | 2408:826a:7c00::/39 | 2408:846a:7c00::/39 | 240e:338:7c00::/39 | 240e:438:7c00::/39 |
| 64 | 黔东南州三穗县 | 2409:8a6a:7e00::/39 | 2409:896a:7e00::/39 | 2408:826a:7e00::/39 | 2408:846a:7e00::/39 | 240e:338:7e00::/39 | 240e:438:7e00::/39 |
| 65 | 黔东南州镇远县 | 2409:8a6a:8000::/39 | 2409:896a:8000::/39 | 2408:826a:8000::/39 | 2408:846a:8000::/39 | 240e:338:8000::/39 | 240e:438:8000::/39 |
| 66 | 黔东南州岑巩县 | 2409:8a6a:8200::/39 | 2409:896a:8200::/39 | 2408:826a:8200::/39 | 2408:846a:8200::/39 | 240e:338:8200::/39 | 240e:438:8200::/39 |
| 67 | 黔东南州天柱县 | 2409:8a6a:8400::/39 | 2409:896a:8400::/39 | 2408:826a:8400::/39 | 2408:846a:8400::/39 | 240e:338:8400::/39 | 240e:438:8400::/39 |
| 68 | 黔东南州锦屏县 | 2409:8a6a:8600::/39 | 2409:896a:8600::/39 | 2408:826a:8600::/39 | 2408:846a:8600::/39 | 240e:338:8600::/39 | 240e:438:8600::/39 |
| 69 | 黔东南州剑河县 | 2409:8a6a:8800::/39 | 2409:896a:8800::/39 | 2408:826a:8800::/39 | 2408:846a:8800::/39 | 240e:338:8800::/39 | 240e:438:8800::/39 |
| 70 | 黔东南州台江县 | 2409:8a6a:8a00::/39 | 2409:896a:8a00::/39 | 2408:826a:8a00::/39 | 2408:846a:8a00::/39 | 240e:338:8a00::/39 | 240e:438:8a00::/39 |
| 71 | 黔东南州黎平县 | 2409:8a6a:8c00::/39 | 2409:896a:8c00::/39 | 2408:826a:8c00::/39 | 2408:846a:8c00::/39 | 240e:338:8c00::/39 | 240e:438:8c00::/39 |
| 72 | 黔东南州榕江县 | 2409:8a6a:8e00::/39 | 2409:896a:8e00::/39 | 2408:826a:8e00::/39 | 2408:846a:8e00::/39 | 240e:338:8e00::/39 | 240e:438:8e00::/39 |
| 73 | 黔东南州从江县 | 2409:8a6a:9000::/39 | 2409:896a:9000::/39 | 2408:826a:9000::/39 | 2408:846a:9000::/39 | 240e:338:9000::/39 | 240e:438:9000::/39 |
| 74 | 黔东南州雷山县 | 2409:8a6a:9200::/39 | 2409:896a:9200::/39 | 2408:826a:9200::/39 | 2408:846a:9200::/39 | 240e:338:9200::/39 | 240e:438:9200::/39 |
| 75 | 黔东南州麻江县 | 2409:8a6a:9400::/39 | 2409:896a:9400::/39 | 2408:826a:9400::/39 | 2408:846a:9400::/39 | 240e:338:9400::/39 | 240e:438:9400::/39 |
| 76 | 黔东南州丹寨县 | 2409:8a6a:9600::/39 | 2409:896a:9600::/39 | 2408:826a:9600::/39 | 2408:846a:9600::/39 | 240e:338:9600::/39 | 240e:438:9600::/39 |
| 77 | 黔南州都匀市 | 2409:8a6a:9800::/39 | 2409:896a:9800::/39 | 2408:826a:9800::/39 | 2408:846a:9800::/39 | 240e:338:9800::/39 | 240e:438:9800::/39 |
| 78 | 黔南州福泉市 | 2409:8a6a:9a00::/39 | 2409:896a:9a00::/39 | 2408:826a:9a00::/39 | 2408:846a:9a00::/39 | 240e:338:9a00::/39 | 240e:438:9a00::/39 |
| 79 | 黔南州荔波县 | 2409:8a6a:9c00::/39 | 2409:896a:9c00::/39 | 2408:826a:9c00::/39 | 2408:846a:9c00::/39 | 240e:338:9c00::/39 | 240e:438:9c00::/39 |
| 80 | 黔南州贵定县 | 2409:8a6a:9e00::/39 | 2409:896a:9e00::/39 | 2408:826a:9e00::/39 | 2408:846a:9e00::/39 | 240e:338:9e00::/39 | 240e:438:9e00::/39 |
| 81 | 黔南州瓮安县 | 2409:8a6a:a000::/39 | 2409:896a:a000::/39 | 2408:826a:a000::/39 | 2408:846a:a000::/39 | 240e:338:a000::/39 | 240e:438:a000::/39 |
| 82 | 黔南州独山县 | 2409:8a6a:a200::/39 | 2409:896a:a200::/39 | 2408:826a:a200::/39 | 2408:846a:a200::/39 | 240e:338:a200::/39 | 240e:438:a200::/39 |
| 83 | 黔南州平塘县 | 2409:8a6a:a400::/39 | 2409:896a:a400::/39 | 2408:826a:a400::/39 | 2408:846a:a400::/39 | 240e:338:a400::/39 | 240e:438:a400::/39 |
| 84 | 黔南州罗甸县 | 2409:8a6a:a600::/39 | 2409:896a:a600::/39 | 2408:826a:a600::/39 | 2408:846a:a600::/39 | 240e:338:a600::/39 | 240e:438:a600::/39 |
| 85 | 黔南州长顺县 | 2409:8a6a:a800::/39 | 2409:896a:a800::/39 | 2408:826a:a800::/39 | 2408:846a:a800::/39 | 240e:338:a800::/39 | 240e:438:a800::/39 |
| 86 | 黔南州龙里县 | 2409:8a6a:aa00::/39 | 2409:896a:aa00::/39 | 2408:826a:aa00::/39 | 2408:846a:aa00::/39 | 240e:338:aa00::/39 | 240e:438:aa00::/39 |
| 87 | 黔南州惠水县 | 2409:8a6a:ac00::/39 | 2409:896a:ac00::/39 | 2408:826a:ac00::/39 | 2408:846a:ac00::/39 | 240e:338:ac00::/39 | 240e:438:ac00::/39 |
| 88 | 黔南州三都县 | 2409:8a6a:ae00::/39 | 2409:896a:ae00::/39 | 2408:826a:ae00::/39 | 2408:846a:ae00::/39 | 240e:338:ae00::/39 | 240e:438:ae00::/39 |


#### 子网

引入子网掩码(NetMask)，从逻辑上把一个大网络划分成一些小网络。子网掩码是由一系列的1和0构成，通过将其同IP地址做“与”运算来指出一个IP地址的网络号是什么。

对于传统IP地址分类来说，A类地址的子网掩码是255.0.0.0；B类地址的子网掩码是255.255.0.0；C类地址的子网掩码是255.255.255.0。

例如，如果要将一个B类网络166.111.0.0划分为多个C类子网来用的话，只要将其子网掩码设置为255.255.255.0即可，这样166.111.1.1和166.111.2.1就分属于不同的网络了。像这样，通过较长的子网掩码将一个网络划分为多个网络的方法就叫做划分子网(Subnetting)。

#### 超网

超网(Supernetting)是同子网类似的概念，它通过较短的子网掩码将多个小网络合成一个大网络。例如，一个单位分到了8个C类地址：202.120.224.0 ～ 202.120.231.0，只要将其子网掩码设置为255.255.248.0，就能使这些C类网络相通。

#### 无类域间路由

无类域间路由(CIDR，Classless Inter-Domain Routing)，又称无分类编址。它是一种分配 IP 地址和进行 IP 路由的方法。IEIF 于1993年引入了 CIDR，以取代互联网上以前的分类网络寻址架构。它的目标是减缓Internet上路由器上路由表的增长，并帮助减缓IPv4 地址的快速耗尽。

>互联网工程任务组(IETF，Internet Engineering Task Force)是一个开放标准组织，它开发和促进自愿性互联网标准，特别是构成互联网协议套件(TCP/IP)的技术标准。它没有正式的会员名册或会员要求。所有参与者和管理者都是志愿者，尽管他们的工作通常由他们的雇主或赞助商资助。
>
>IETF 最初是由美国联邦政府支持的一项活动，但自 1993 年以来，它在国际会员制非营利组织 Internet Society 的主持下作为标准制定职能运作。

IPv4的有类网络设计将网络前缀大小设置为一个或多个 8 位组，从而产生 A、B 或 C 类地址块，而 CIDR 地址空间下的任何地址分配给Internet 服务提供商和最终用户-位边界。然而，在IPv6中，接口标识符按照惯例具有 64 位的固定大小，并且永远不会将较小的子网分配给最终用户。

CIDR 包含几个概念。它基于可变长度子网掩码（VLSM），它允许指定任意长度的前缀。CIDR 引入了一种新的 IP 地址表示方法，现在通常称为 CIDR 表示法，其中地址或路由前缀写有表示前缀位数的后缀，例如 IPv4 的192.0.2.0/24，以及用于 IPv6 的 2001:db8::/32。CIDR 引入了一个根据组织的实际和短期预计需求为组织分配地址块的管理流程。多个连续前缀的聚合导致超网在更大的 Internet 中，尽可能将其作为聚合进行通告，从而减少全局路由表中的条目数。


CIDR消除了传统 A 类、B 类和 C 类地址以及划分子网的概念，使用网络前缀和主机号来对 IP 地址进行编码，网络前缀的长度可以根据需要变化。CIDR 的记法上采用在 IP 地址后面加上网络前缀长度的方法，例如 128.14.35.7/20 表示前 20 位为网络前缀。

CIDR的地址掩码可以继续称为子网掩码，子网掩码首 1 长度为网络前缀的长度（上例中即为20）。

一个CIDR地址块中有很多地址，一个CIDR表示的网络就可以表示原来的很多个网络，并且在路由表中只需要一个路由就可以代替原来的多个路由，减少了路由表项的数量。把这种通过使用网络前缀来减少路由表项的方式称为路由聚合，也称为构成超网。

在路由表中的项目由“网络前缀”和“下一跳地址”组成，在查找时可能会得到不止一个匹配结果，应当采用最长前缀匹配来确定应该匹配哪一个。

地址根据网络拓扑来分配，可以将连续的一组网络地址分配给一家公司，并使整组地址作为一个网络地址(比如使用超网技术)，在外部路由表上只有一个路由表项。这样既解决了地址匮乏问题，又解决了路由表膨胀的问题。

CIDR将整个世界分为四个地区，给每个地区分配了一段连续的C类地址，分别是：欧洲(194.0.0.0～195.255.255.255)、北美(198.0.0.0～199.255.255.255)、中南美(200.0.0.0～201.255.255.255)和亚太(202.0.0.0～203.255.255.255)。这样，当一个亚太地区以外的路由器收到前8位为202或203的数据报时，它只需要将其放到通向亚太地区的路由即可，而对后24位的路由则可以在数据报到达亚太地区后再进行处理，这样就大大缓解了路由表膨胀的问题。

##### CIDR 表示法

CIDR 表示法是 IP 地址及其相关网络掩码的紧凑表示。该符号是由 Phil Karn 在 1980 年代发明的。CIDR 表示法指定 IP 地址、斜杠('/')字符和十进制数。十进制数是网络掩码前导位的计数，也可以被认为是网络前缀的宽度（以位为单位）。CIDR 表示法中的 IP 地址始终根据 IPv4 或 IPv6 标准表示。

该地址可以表示特定的接口地址（包括主机标识符，如10.0.0.1/8），也可以是整个网络的起始地址（使用主机标识符0，如10.0.0.0/8或相当于10/8）。CIDR 表示法甚至可以在根本没有 IP 地址的情况下使用，例如，当将/24称为对具有24位前缀和8位主机号的 IPv4 网络的一般描述时。

例如：

- 198.51.100.14/24表示 IPv4 地址198.51.100.14及其关联的网络前缀198.51.100.0，或者等效地，它的子网掩码255.255.255.0，它有 24 个前导位。
- IPv4 块 198.51.100.0/22 表示从 198.51.100.0 到 198.51.103.255 的 1024 个 IPv4 地址。
- IPv6 块 2001:db8::/48 表示从 2001:db8:0:0:0:0:0:0 到 2001:db8:0:ffff:ffff:ffff:ffff:ffff 的 IPv6 地址块。
- ::1/128表示 IPv6 环回地址。它的前缀长度是128，这是地址中的位数。
- 在 IPv4 中，现在所谓的 CIDR 表示法是在实施 CIDR 之后才开始广泛使用的。它没有出现在原来的 CIDR 标准中，而是在斜线后面使用点分十进制子网掩码；例如，192.24.12.0/255.255.252.0 将网络前缀的宽度描述为单个数字（192.24.12.0/22）更便于网络管理员进行概念化和心理计算，因此逐渐被纳入后来的标准文档和网络配置中接口。

网络或子网内的地址数可以计算为 2 x (地址长度 - 前缀长度)，其中IPv6 的地址长度为128，IPv4 的地址长度为32。


#### IP地址的分配

TCP/IP协议需要针对不同的网络进行不同的设置，且每个节点一般需要一个“IP地址”、一个“子网掩码”、一个“默认网关”。不过，可以通过动态主机配置协议（DHCP），给客户端自动分配一个IP地址，避免了出错，也简化了TCP/IP协议的设置。

IP地址现由因特网名字与号码指派公司ICANN（Internet Corporation for Assigned Names and Numbers）分配。

- InterNIC(因特网信息中心)：负责美国及其他地区，负责北美B类IP地址分配；
- ENIC：负责欧洲地区，负责A类IP地址分配；
- APNIC（Asia Pacific Network Information Center）：负责亚太B类IP地址分配。我国用户可向APNIC申请（要缴费）。
> PS：1998年，APNIC的总部从东京搬迁到澳大利亚布里斯班。

#### DHCP

Dynamic Host Configuration Protocol，动态主机配置协议。

两台连接到互联网上的电脑相互之间通信，必须有各自的IP地址，由于IP地址资源有限，宽带接入运营商不能做到给每个报装宽带的用户都能分配一个固定的IP地址（所谓固定IP就是即使在你不上网的时候，别人也不能用这个IP地址，这个资源一直被你所独占），所以要采用DHCP方式对上网的用户进行临时的地址分配。也就是你的电脑连上网，DHCP服务器才从地址池里临时分配一个IP地址给你，每次上网分配的IP地址可能会不一样，这跟当时IP地址资源有关。当下线的时候，DHCP服务器可能就会把这个地址分配给之后上线的其他电脑。这样就可以有效节约IP地址，既保证了网络通信，又提高IP地址的使用率。

IP地址不是与生俱来，需要在接入网络后设备发送广播请求IP，DHCP服务器收到请求发送一个空闲的IP，设备收到回复发送租用请求，最后DHCP发送消息表示租用成功。在这个过程中由于设备还没有IP地址，所以需要MAC地址来标识自己。假如同时有两个没有MAC地址的设备接入网络，同时请求IP，那么DHCP服务器将不能区分是收到了两个请求还是同一个请求收到了两遍。

如今比较流行的接入Internet的方式是把主机通过局域网组织在一起，然后再通过交换机和Internet相连接。这样一来就出现了如何区分具体用户，防止盗用的问题。局域网采用了用MAC地址来标识具体用户的方法。具体实现：在交换机内部通过“表”的方式把MAC地址和IP地址一一对应，也就是所说的IP、MAC绑定。当有发给本地局域网内一台主机的数据包时，交换机接收下来，然后把数据包中的IP地址按照“表”中的对应关系映射成MAC地址，转发到对应的MAC地址的主机上，这样一来，即使某台主机盗用了这个IP地址，但由于他没有这个MAC地址，因此也不会收到数据包。发送过程和接收过程类似。 

##### Mac地址

MAC(Media Access Control，介质访问控制)，或称为硬件位址，用来定义网络设备的位置。

MAC地址，用来表示互联网上每一个站点的标识符，采用十六进制数表示，共六个字节(48位)。其中，前三个字节是由IEEE的注册管理机构RA负责给不同厂家分配的代码(高位24位)，也称为“编制上唯一的标识符”(Organizationally Unique Identifier)，后三个字节(低位24位)由各厂家自行指派给生产的适配器接口，称为扩展标识符(唯一性)。一个地址块可以生成2^24个不同的地址。MAC地址实际上就是适配器地址或适配器标识符EUI-48。

MAC地址先于IP地址存在，TCP/IP协议诞生之前就有五花八门的网络，互相之间协议不互通，MAC就是其中一个，TCP/IP在更高层次上将他们连接起来，至于底层是什么交由各自管理。后来MAC接近一统江湖，但是大局已定，而且这样做并没有明显的缺点，如果改动反而是困难重重（ipv6比v4那么大的优势缺还是难以取代），所以便沿用早期设计。

