## block chain

区块链

Block chain 技术源于2008年推出的比特币

区块链是数字世界中进行“价值表示”和“价值转移”的技术。区块链硬币一面是表示价值的加密数字货币或通证，另一面是进行价值转移的分布式账本与去中心网络。

比特币系统的三层命名（应用层、应用协议层、通用协议层）源自知名区块链研究者梅兰妮·斯万，她也提出了被广泛引述的一种阶段划分：区块链 1.0 是货币、区块链 2.0 是合约、区块链 3.0 是应用。

### 加密数字货币

在物理世界中，现金可以非常简单，它需要的是防伪功能。现金是一张纸条，我可以在一张纸条上写“拿到这张纸条的人可以找我领取一只羊”，然后签上自己的名字。签名就是防伪措施。我把纸条拿给你，纸条到你手中，我就没有了。

在数字世界中，情况开始变得复杂：这张纸条和上面的签名是一个数字文件，而电子文件可以被无数次地完美复制。把这个电子文件给你之后，我还可以再把这个电子文件给第三个人。这就是所谓的双重支付（double spending）问题。

大卫·乔姆提出了一个创造性的方案，在数字世界里解决了这个难题。他的方法是采用这样的逻辑：在一张纸条上，你选择一个只有你知道的序列号，然后我在上面签名。由于我不知道这个序列号，因此我没法再复制一份这张纸条给另一个人。这就是密码学上所谓的盲签（blind signature）。这个思路形成了“第一个真正意义上的电子货币方案”。1989年，大卫·乔姆还创建了数字现金公司（DigiCash）来把自己的想法商业化，但未能被大规模接受。

这个方案的缺点是，它要运转起来，就必须有一个所有参与者都信任的中心化服务器来进行这些“数字纸条”的验证。

比特币是戴伟在1998年在密码朋克中所提到的B币构想和尼克·萨博提出的比特黄金的具体实现。

计算机科学家尼克·萨博在1998年提出了名为比特黄金的方案。在现在的区块链世界中，尼克·萨博有着更为重要的位置：萨博是“智能合约”（smart contract）的提出者，1993年他写出了“智能合约”论文。智能合约是区块链处理交易的核心方式，区块链应用的实质可被看成是一个个智能合约的组合。

1998年，戴伟的B币首次引入了通过解决计算难题和去中心化共识创造货币的思想，但是该建议并未给出如何实现去中心化共识的具体方法。

这一阶段的第四个重要人物是知名密码学家哈尔·芬尼，他是著名的PGP加密中的“G”，是密码朋克圈中的前辈。他在2004年推出了自己版本的采用工作量证明（POW）机制的电子货币。在比特币开发过程中，哈尔·芬尼与中本聪有很多互动，比特币的第一笔转账就是中本聪转了10个比特币给哈尔·芬尼。

2005年，知名密码学家哈尔·芬尼，著名的PGP加密中的“G”，他引入了“可重复使用的工作量证明”（RPOW）概念，它同时使用B币的思想和亚当·贝克提出的计算困难的哈希现金难题来创造密码学货币。但是，这种概念再次迷失于理想化，因为它依赖于可信任的计算作为后端。

他们四人的具体设想各有不同，但有一个共同点，即都是让计算机进行计算，从而“创造”电子现金，它们是比特币系统让计算机进行加密计算的工作量证明和“挖矿”的创意来源。这非常重要，有了这个想法，中心化服务器才可以被去中心网络所取代，困扰数字货币的难题被解决了。

再往前，这个想法可追溯到1992年密码学家辛提亚·沃克（Cynthia Dwork）、摩尼·纳欧尔（Moni Naor）提出来的用于减少垃圾邮件的一个方案，对此杰里米·克拉克在《区块链：技术驱动金融》一书中解释说：“设想你每次发送邮件时，计算机都不得不花几秒钟解决一道数学计算题目。如果你没能附上答案，收件人的邮箱会自动忽略这封邮件”。

2009年，一个去中心化的货币第一次被中本聪实现，它通过已有公钥加密方式来管理所有权，并用一个名为工作量证明的共识算法来记录谁拥有货币。”

对于前人的数字货币系统（比如乔姆的系统）为什么会失败，中本聪曾经写道：自20世纪90年代以来所有的虚拟货币公司全都失败了……我希望，人们可以看到，这些系统之所以失败，显然是因为它们的中心化控制这一特性。我想，我们正在首次尝试建立一个去中心化的、非基于信任的系统。

### 比特币

2008 年 10 月 31 日，中本聪向一个密码学邮件列表的所有成员发送了一个电子邮件，标题为“比特币：点对点电子现金论文”。

他写道：“我一直在研究一个新的电子现金系统，它完全是点对点的，无须任何的可信第三方。”比特币的起源应远早于这个日期，中本聪曾说，他从 2007 年 5 月就开始为比特币项目编程。2008 年 8 月，他注册了 bitcoin.org 域名，这是现在比特币项目的官方网址。

在邮件中，他附上了比特币白皮书的链接，论文题为“比特币：一个点对点电子现金系统”（Bitcoin:A Peer-to-Peer Electronic Cash System）。中本聪在2008年发表的这篇论文可能是互联网发展史上最重要的论文之一，其他重要论文有利克里德写的开启互联网前身阿帕网的“计算机作为一种通信设备”（1968年）、蒂姆·伯纳斯-李写的万维网协议（WWW）建议书“信息管理：一个建议”（1989年）、谷歌联合创始人谢尔盖·布林与拉里·佩奇写的搜索引擎论文（1998年）等。

2008 年 11 月 16 日，中本聪公布了比特币系统的源代码。在发布白皮书、将软件代码开源后，在 2009 年 1 月 3 日这一区块链的创世时刻，最终他在互联网上上线了比特币网络。之后，中本聪和几个开发者在网上一起讨论想法，继续开发迭代。随着比特币网络的成熟，他的活动开始减少，比特币系统逐渐进入自治运转的状态。最终，在发明比特币系统 3 年后，自 2011 年 11 月后，中本聪永远不再出现。他成了一个永远匿名的传奇，没人知道他是谁，他只留下了自己的创造。

2009年1月3日，在位于芬兰赫尔辛基的服务器上，至今匿名的神秘技术极客中本聪（Satoshi Nakamoto）生成了第一个比特币区块，即所谓的比特币创世区块（genesis block）。

在生成创世区块时，按设定的规则，中本聪获得了 50 个比特币奖励，这是最早的 50 个比特币。从创始区块开始，在比特币的账本上每 10 分钟就有新的数据区块被增加上去，新的比特币被凭空发行出来。比特币的去中心网络开始运转，扩展到现在的由数万个节点组成的全球网络。

在比特币的创世时刻，它的三个组成部分都出现了，即加密数字货币（cryptocurrency）、分布式账本（distributed ledger）、去中心网络（decentralized network）。


### 以太坊

在过去这些年中出现了很多对比特币系统的改进，如替代币（altcoin）、替代链（alt chain）、侧链与跨链等。曾被认为是替代链的以太坊，可能是对比特币系统的众多改进中被广泛接受的一个。

过去几年，基于以太坊区块链、以太坊的智能合约和通证标准，大量的通证涌现，这使以太坊变成仅次于比特币系统的热门生态。在软件层面，以太坊新加入的是智能合约，但在实际应用中，它真正带来巨变的是通证。

现在，有不少新项目在认可以太坊是区块链 2.0 的前提下，试图竞争成为所谓的区块链 3.0，试图成为应用开发的新一代平台，竞争才刚刚开始。

在以太坊白皮书中，维塔利克·布特林在分析了比特币区块链之后认为，在比特币系统的基础上开发高级应用有三种可行路径：

1. 建立一个新的区块链。
2. 在比特币区块链上使用脚本。
3. 在比特币区块链上建立元协议（meta-protocol）。

维塔利克认为，比特币系统的主要设计 UTXO（未使用的交易输出）和其对应的脚本语言有缺陷，他总结认为它有以下四点不足：

1. 缺少图灵完备性（lack of turing-completeness）。尽管比特币的脚本语言可以支持多种计算，但是它不能支持所有的计算。
2. 价值盲（value-blindness）。UTXO 脚本不能为账户的取款额度提供精细的控制。
3. 缺少状态（lack of state）。UTXO 只能是已花费或者未花费状态，这意味着 UTXO 只能用于建立简单的、一次性的合约。
4. 区块链盲（blockchain-blindness）。UTXO 看不到区块链的数据，比如区块头部的随机数、时间戳和上一个区块数据的哈希值。

维塔利克得出了自己的结论，他认为应当开发一个“下一代智能合约和去中心化应用平台”。他把自己将要开发的系统命名为“以太坊”。在白皮书摘要部分，以太坊的目标是，提供一个区块链，内置有成熟的图灵完备的编程语言，用这种语言可以创建合约来编码，实现任意状态转换功能。

“状态转换”反映了维塔利克对比特币系统和区块链的认识。在白皮书中他认为，比特币是一个状态转换系统，而他为以太坊设计了一个更灵活的状态转换系统。

以太坊的目标描述可以细分成以下三个部分：

1. 维塔利克要创建一个新的区块链。
2. 这个区块链的特色是，有一个能实现所有计算，即所谓的图灵完备的脚本编程语言。
3. 这个脚本语言可以用来创建复杂的“智能合约”，用以控制区块链的状态转换，也即进行链上数字资产的转移。

关于智能合约，在以太坊白皮书中，维塔利克用的词汇是“实现预先设定规则的一段代码”（implementing arbitrary rules）。在区块链上，这些代码的用途是控制链上的数字资产的转移。

在以太坊白皮书中，维塔利克认为，在以太坊上可以开发三大类应用：

1. 金融应用（financial）：为用户提供更强大的的方法，用他们的钱去管理和参与合约。这些应用包括子货币、金融衍生品、对冲合约、储蓄钱包、遗嘱，甚至雇用合约。
2. 半金融应用（semi-financial）：这里有钱的存在，但非金钱的方面所占的比例也很重。一个好例子是为了解决计算问题而设的自动执行的悬赏。
3. 非金融应用（non-financial）：如在线投票和去中心化治理等。

以太坊的最初设计目标是建立一个智能合约和去中心化应用平台，它和比特币区块链的最大不同是，它包括了一个图灵完备的编程语言（Solidity）。利用 Solidity，我们可以在以太坊上更方便地编写“智能合约”，以太坊也提供了一个代码运行环境——以太坊虚拟机（EVM）。有了这些，在以太坊区块链上，逻辑上我们就可以开发去中心化应用（decentralized application）了。去中心化应用常被简写为 DAPP，现在它通常指利用了区块链技术的网站或移动 App 应用。

以太坊并没有像最初设想的那样，从比特币区块链的加密数字货币功能跨出两大步，成为应用的平台。按梅兰妮·斯万的区分，区块链 1.0 是货币，区块链 2.0 是合约，区块链 3.0 是应用，而以太坊的初始目标是建立智能合约和去中心化应用平台。在实践中，它跨出了一步或者说半步：以太坊区块链上最常用的功能并非去中心化应用，而是编写智能合约，更符合实际情况的说法是，编写智能合约以管理用通证表示的数字资产。

为了理解通证与数字资产，我们再来对比一下比特币和以太坊。

在比特币的二次开发或应用中，最广为人知的是众多的替代币。人们简单修改比特币开源代码的参数，然后就可以用这个代码运行一个新的区块链，创建新的替代币。

在以太坊的二次开发或应用中，最为广泛的是基于它的智能合约创建符合ERC20标准的通证。以太坊的智能合约将创建通证的门槛降到了很低。

以太坊还将进行代币众筹的门槛降到了很低。在以太坊区块链上，代币众筹的流程是，一个区块链应用项目的团队在以太坊上创建一种通证，然后投资者可以用自己的以太币按照规则兑换项目的通证。

匿名的中本聪几乎靠自己一个人设计和开发了比特币系统，规划它的经济激励模型，然后让它在互联网上自由生长。在比特币项目中，他花费了多少开发资金，资金来源于何处，现在我们都再也无从了解，但合理的猜测是，总投入并不大。

但是，当维塔利克和团队开发与运营以太坊时，它已经不太可能是一个宿舍里的作品，以太坊团队需要资金来运转。

在发布白皮书后，维塔利克吸引合伙人加入，建立了一个项目所需的商业和法律架构（一个瑞士公司以及后续的一个瑞士的非营利性基金会）。他和团队一起进行项目的设计与开发。在2014年4月，以太坊发布了由联合创始人加文·伍德（Gavin Wood）撰写的技术白皮书。

为了获得所需的资金，在 2014 年 7 月到 8 月，以太坊进行了为期 42 天的在线众筹：参与者可以用比特币换取以太坊的通证——以太币（当时叫ether）。

这个代币众筹可以看成是，面向比特币持有者进行了一次以太币的预售。在 2008 年前后，KickStarter、Indigogo 等产品众筹网站开始逐渐建立，后来还出现了股权众筹等各种形式。以太坊的众筹可以说是这种产品众筹方式的延续，不同的是：

- 它所筹集的不是法币（法定货币），而是比特币。
- 人们获得的不是明确的商品或股权，而是换得了以太币。

这次代币众筹是在当时非常小的比特币社区中进行的，带有强烈的理想主义，很像是比特币社区的成员们用自己手上的比特币赞助了一个新区块链的开发。

通过这次代币众筹，以太坊获得了 31531 个比特币，按当时的比特币价格换算，它获得了 1843 万美元，这是当时排名第二的众筹项目。

2015 年 6 月 30 日，以太坊的首个版本正式上线，预挖的 7200 万枚以太币被分配给众筹参与者与项目团队。在之前的众筹中，以太坊共售出了 6010 万枚以太币。到此，以太坊的代币众筹过程就完成了。

由于之后比特币的价格大幅波动，众筹获得大量比特币的以太坊项目还经历了几个插曲。比如，由于比特币价格暴跌，而以太坊基金会没有在高点把手中的比特币换成法币，它用以支付各项费用的法币资金短缺，不得不大幅度削减预算。

2015 年 9 月，中国万向集团旗下的基金用 50 万美元向以太坊基金会“购买”了41.6万枚以太币。按2018年5月以太币处于较低点的价格计算，这批以太币的价值仍超过2亿美元。这常被认为是一次“赞助”，是对当时资金困难的以太坊基金会的支持。

在发展的一开始，以太坊有了这样一个成功的代币众筹，这一思路很自然地被发扬光大。

在 2015 年 11 月 19 日，以太坊的主要开发者费边·沃格尔斯特勒（Fabian Vogelsteller）向社区提议了 ERC20 标准。

ERC 是 Ethereum Request for Comment 的缩写，除了 ERC20 这个可互换通证标准之外，主要采用的标准还有 ERC721 不可互换通证标准（non-fungible tokens），它也被称为契约（deeds）。在 2018 年年底大为流行的加密猫（CryptoKitty）是基于 ERC721 通证标准发行的。

代币众筹与后来的名字（首次代币发行（ICO））在2017年大为盛行后又陷入巨大争议，这个机制被滥用了。

2017年9月4日，中国人民银行等七部委发布公告叫停首次代币发行（ICO）。

公告指出，“近期，国内通过发行代币形式包括首次代币发行（ICO）进行融资的活动大量涌现，投机炒作盛行，涉嫌从事非法金融活动，严重扰乱了经济金融秩序”。

公告认为，“代币发行融资是指融资主体通过代币的违规发售、流通，向投资者筹集比特币、以太币等所谓‘虚拟货币’，本质上是一种未经批准非法公开融资的行为，涉嫌非法发售代币票券、非法发行证券以及非法集资、金融诈骗、传销等违法犯罪活动”。

公告要求，“本公告发布之日起，各类代币发行融资活动应当立即停止。已完成代币发行融资的组织和个人应当做出清退等安排，合理保护投资者权益，妥善处置风险”。“本公告发布之日起，任何所谓的代币融资交易平台不得从事法定货币与代币、‘虚拟货币’相互之间的兑换业务，不得买卖或作为中央对手方买卖代币或‘虚拟货币’，不得为代币或‘虚拟货币’提供定价、信息中介等服务”。

### EOS

EOS 是由 Block.one 公司开发的一个新的区块链软件系统，它的目标是将一切去中心化（decentralize everything）。从 2017 年年中开始，经过一年的代币众筹后，它于 2018 年 6 月 15 通过由数十个区块生产者（block producer，BP，又称超级节点）组成的社区上线了主网，EOS 主网这条主要的区块链开始正式运转。

EOS，可以理解为Enterprise Operation System，即为商用分布式应用设计的一款区块链操作系统。

EOS是引入的一种新的区块链架构，旨在实现分布式应用的性能扩展。

注意，它并不是像比特币和以太坊那样的货币，而是基于EOS软件项目之上发布的代币，被称为区块链3.0。

EOS 网络要依靠超级节点（即区块生产者）来各自建设、共同运营，按现在的设计，这些节点共同获得每年 1% 新增发的 EOS 作为回报。

与以太坊不同，EOS 网络的设计是不再收取网络交易费，持有 EOS 通证则拥有对应的网络使用权利。但是，如果一个应用的开发者不持有足够的 EOS 通证，可能就要从市场中购买和付费租用，以获得使用主网的权利。

Block.one 公司募集资金开发一个名为 EOSIO 的开源软件。EOS 社区用这个软件来运行 EOS 主网，且从逻辑上来讲，这个主网并非由 Block.one 公司运行，而是由社区运行的。另外，其他人也用 EOSIO 这个开源软件建立替代网（altnet）。

EOS 是对以太坊的改进，各个用 EOSIO 开源软件运行起来的区块链网络，可以做几乎所有以太坊能做的事，如编写智能合约、发行通证。


EOS 的主要开发者是区块链的传奇人物丹尼尔·拉瑞莫（Daniel Larimer），他的网名为 ByteMaster，在网上他也被称为 BM。BM 个人参与创建了三个主要的区块链公链项目，EOS 是第三个。
